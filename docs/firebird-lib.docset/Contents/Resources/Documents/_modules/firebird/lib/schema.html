<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>firebird.lib.schema &#8212; firebird-lib 1.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bootstrap-sphinx.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../../_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../../../index.html">
          firebird-lib</a>
        <span class="navbar-text pull-left"><b>1.4.0</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../../../usage-guide.html">Usage Guide</a></li>
                <li><a href="../../../reference.html">Reference</a></li>
                <li><a href="../../../genindex.html">Index</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Content <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../usage-guide.html">Usage Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage-guide.html#working-with-database-schema">Working with database schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#information-provided-by-schema">Information provided by <code class="xref py py-obj docutils literal notranslate"><span class="pre">Schema</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#metadata-objects">Metadata objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#visitor-pattern-support">Visitor Pattern support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#index-5">Object dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#enhanced-list-of-objects">Enhanced list of objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#sql-operations">SQL operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage-guide.html#working-with-user-privileges">Working with user privileges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage-guide.html#working-with-monitoring-tables">Working with monitoring tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#information-provided-by-monitor">Information provided by <code class="xref py py-obj docutils literal notranslate"><span class="pre">Monitor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#activity-snapshot">Activity snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#i-o-statistics">I/O statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage-guide.html#processing-output-from-gstat-utility">Processing output from gstat utility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#parsing-gstat-output">Parsing gstat output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage-guide.html#processing-firebird-server-log">Processing Firebird server log</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#parsing-the-log">Parsing the log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage-guide.html#processing-output-from-firebird-server-trace-sessions">Processing output from Firebird server trace sessions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage-guide.html#parsing-the-output-from-trace-session">Parsing the output from trace session</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference.html">Firebird-lib Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../reference.html#package-modules">Package modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../ref-schema.html">firebird.lib.schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ref-monitor.html">firebird.lib.monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ref-trace.html">firebird.lib.trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ref-gstat.html">firebird.lib.gstat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ref-log.html">firebird.lib.log</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ref-logmsgs.html">firebird.lib.logmsgs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-4-0">Version 1.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-3-0">Version 1.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-2-2">Version 1.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-2-1">Version 1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-2-0">Version 1.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-0-1">Version 1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#version-1-0-0">Version 1.0.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">License</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body span12 content" role="main">
      
  <h1>Source code for firebird.lib.schema</h1><div class="highlight"><pre>
<span></span><span class="c1">#coding:utf-8</span>
<span class="c1">#</span>
<span class="c1"># PROGRAM/MODULE: firebird-lib</span>
<span class="c1"># FILE:           firebird/lib/schema.py</span>
<span class="c1"># DESCRIPTION:    Module for work with Firebird database schema</span>
<span class="c1"># CREATED:        21.9.2020</span>
<span class="c1">#</span>
<span class="c1"># The contents of this file are subject to the MIT License</span>
<span class="c1">#</span>
<span class="c1"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c1"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c1"># in the Software without restriction, including without limitation the rights</span>
<span class="c1"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c1"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="c1"># furnished to do so, subject to the following conditions:</span>
<span class="c1">#</span>
<span class="c1"># The above copyright notice and this permission notice shall be included in all</span>
<span class="c1"># copies or substantial portions of the Software.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c1"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c1"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c1"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c1"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c1"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="c1"># SOFTWARE.</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 2020 Firebird Project (www.firebirdsql.org)</span>
<span class="c1"># All Rights Reserved.</span>
<span class="c1">#</span>
<span class="c1"># Contributor(s): Pavel Císař (original code)</span>
<span class="c1">#                 ______________________________________</span>
<span class="c1"># pylint: disable=C0302, C0301, W0212, R0902, R0912,R0913, R0914, R0915, R0904, C0103</span>

<span class="sd">&quot;&quot;&quot;firebird.lib.schema - Module for work with Firebird database schema</span>


<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">groupby</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">auto</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">IntEnum</span><span class="p">,</span> <span class="n">IntFlag</span>
<span class="kn">from</span> <span class="nn">firebird.base.collections</span> <span class="kn">import</span> <span class="n">DataList</span>
<span class="kn">from</span> <span class="nn">firebird.driver</span> <span class="kn">import</span> <span class="n">Connection</span><span class="p">,</span> <span class="n">Cursor</span><span class="p">,</span> <span class="n">Statement</span><span class="p">,</span> <span class="n">Isolation</span><span class="p">,</span> <span class="n">TraAccessMode</span><span class="p">,</span> <span class="n">Error</span><span class="p">,</span> <span class="n">tpb</span>
<span class="kn">from</span> <span class="nn">firebird.driver.types</span> <span class="kn">import</span> <span class="n">UserInfo</span>

<div class="viewcode-block" id="FieldType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FieldType">[docs]</a><span class="k">class</span> <span class="nc">FieldType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Firebird field type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">NONE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">SHORT</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">LONG</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">QUAD</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">FLOAT</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">DATE</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">TIME</span> <span class="o">=</span> <span class="mi">13</span>
    <span class="n">TEXT</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">INT64</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">BOOLEAN</span> <span class="o">=</span> <span class="mi">23</span>
    <span class="n">DEC16</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">DEC34</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="n">INT128</span> <span class="o">=</span> <span class="mi">26</span>
    <span class="n">DOUBLE</span> <span class="o">=</span> <span class="mi">27</span>
    <span class="n">TIME_TZ</span> <span class="o">=</span> <span class="mi">28</span>
    <span class="n">TIMESTAMP_TZ</span> <span class="o">=</span> <span class="mi">29</span>
    <span class="n">TIME_TZ_EX</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">TIMESTAMP_TZ_EX</span> <span class="o">=</span> <span class="mi">31</span>
    <span class="n">TIMESTAMP</span> <span class="o">=</span> <span class="mi">35</span>
    <span class="n">VARYING</span> <span class="o">=</span> <span class="mi">37</span>
    <span class="n">CSTRING</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">BLOB_ID</span> <span class="o">=</span> <span class="mi">45</span>
    <span class="n">BLOB</span> <span class="o">=</span> <span class="mi">261</span></div>

<div class="viewcode-block" id="FieldSubType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FieldSubType">[docs]</a><span class="k">class</span> <span class="nc">FieldSubType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Field sub-types.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># BLOB sub-types</span>
    <span class="n">BINARY</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">TEXT</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">BLR</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ACL</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">RANGES</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">SUMMARY</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">FORMAT</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">TRANSACTION_DESCRIPTION</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">EXTERNAL_FILE_DESCRIPTION</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">DEBUG_INFORMATION</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="c1"># Integral sub-types</span>
    <span class="n">NUMERIC</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">DECIMAL</span> <span class="o">=</span> <span class="mi">2</span></div>

<span class="c1"># Lists and disctionary maps</span>
<span class="n">COLUMN_TYPES</span> <span class="o">=</span> <span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">SHORT</span><span class="p">:</span> <span class="s1">&#39;SMALLINT&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">LONG</span><span class="p">:</span> <span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">QUAD</span><span class="p">:</span> <span class="s1">&#39;QUAD&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">FLOAT</span><span class="p">:</span> <span class="s1">&#39;FLOAT&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">TEXT</span><span class="p">:</span> <span class="s1">&#39;CHAR&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">:</span> <span class="s1">&#39;DOUBLE PRECISION&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">VARYING</span>                        <span class="p">:</span> <span class="s1">&#39;VARCHAR&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">CSTRING</span><span class="p">:</span> <span class="s1">&#39;CSTRING&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">BLOB_ID</span><span class="p">:</span> <span class="s1">&#39;BLOB_ID&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">BLOB</span><span class="p">:</span> <span class="s1">&#39;BLOB&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">TIME</span><span class="p">:</span> <span class="s1">&#39;TIME&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">DATE</span><span class="p">:</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">TIMESTAMP</span><span class="p">:</span> <span class="s1">&#39;TIMESTAMP&#39;</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">INT64</span><span class="p">:</span> <span class="s1">&#39;BIGINT&#39;</span><span class="p">,</span>
                <span class="n">FieldType</span><span class="o">.</span><span class="n">BOOLEAN</span><span class="p">:</span> <span class="s1">&#39;BOOLEAN&#39;</span><span class="p">}</span>

<span class="n">INTEGRAL_SUBTYPES</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;UNKNOWN&#39;</span><span class="p">,</span> <span class="s1">&#39;NUMERIC&#39;</span><span class="p">,</span> <span class="s1">&#39;DECIMAL&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="IndexType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.IndexType">[docs]</a><span class="k">class</span> <span class="nc">IndexType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Index ordering.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ASCENDING</span> <span class="o">=</span> <span class="s1">&#39;ASCENDING&#39;</span>
    <span class="n">DESCENDING</span> <span class="o">=</span> <span class="s1">&#39;DESCENDING&#39;</span></div>

<div class="viewcode-block" id="ObjectType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ObjectType">[docs]</a><span class="k">class</span> <span class="nc">ObjectType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dependent type codes.</span>

<span class="sd">    .. versionchanged:: 1.4.0 - `PACKAGE` renamed to `PACKAGE_HEADER`, added values 20-37</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TABLE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">VIEW</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TRIGGER</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">DOMAIN</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">CHECK</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">PROCEDURE</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">INDEX_EXPR</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">EXCEPTION</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">USER</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">COLUMN</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">INDEX</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">CHARACTER_SET</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">USER_GROUP</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">ROLE</span> <span class="o">=</span> <span class="mi">13</span>
    <span class="n">GENERATOR</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">UDF</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">BLOB_FILTER</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">COLLATION</span> <span class="o">=</span> <span class="mi">17</span>
    <span class="n">PACKAGE_HEADER</span> <span class="o">=</span> <span class="mi">18</span>
    <span class="n">PACKAGE_BODY</span> <span class="o">=</span> <span class="mi">19</span>
    <span class="n">PRIVILEGE</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="c1"># Object types for DDL operations</span>
    <span class="n">DATABASE</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">RELATIONS</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">VIEWS</span> <span class="o">=</span> <span class="mi">23</span>
    <span class="n">PROCEDURES</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">FUNCTIONS</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="n">PACKAGES</span> <span class="o">=</span> <span class="mi">26</span>
    <span class="n">GENERATORS</span> <span class="o">=</span> <span class="mi">27</span>
    <span class="n">DOMAINS</span> <span class="o">=</span> <span class="mi">28</span>
    <span class="n">EXCEPTIONS</span> <span class="o">=</span> <span class="mi">29</span>
    <span class="n">ROLES</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">CHARSETS</span> <span class="o">=</span> <span class="mi">31</span>
    <span class="n">COLLATIONS</span> <span class="o">=</span> <span class="mi">32</span>
    <span class="n">FILTERS</span> <span class="o">=</span> <span class="mi">33</span>
    <span class="c1"># Codes that could be used in RDB$DEPENDENCIES or RDB$USER_PRIVILEGES</span>
    <span class="n">JOBS</span> <span class="o">=</span> <span class="mi">34</span>
    <span class="n">TABLESPACE</span> <span class="o">=</span> <span class="mi">35</span>
    <span class="n">TABLESPACES</span> <span class="o">=</span> <span class="mi">36</span>
    <span class="n">INDEX_CONDITION</span> <span class="o">=</span> <span class="mi">37</span></div>

<span class="k">class</span> <span class="nc">FunctionType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">VALUE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">BOOLEAN</span> <span class="o">=</span> <span class="mi">1</span>

<div class="viewcode-block" id="Mechanism"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Mechanism">[docs]</a><span class="k">class</span> <span class="nc">Mechanism</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mechanism codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">BY_VALUE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">BY_REFERENCE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">BY_VMS_DESCRIPTOR</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">BY_ISC_DESCRIPTOR</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">BY_SCALAR_ARRAY_DESCRIPTOR</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">BY_REFERENCE_WITH_NULL</span> <span class="o">=</span> <span class="mi">5</span></div>

<div class="viewcode-block" id="TransactionState"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TransactionState">[docs]</a><span class="k">class</span> <span class="nc">TransactionState</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transaction state codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LIMBO</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">COMMITTED</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ROLLED_BACK</span> <span class="o">=</span> <span class="mi">3</span></div>

<div class="viewcode-block" id="SystemFlag"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SystemFlag">[docs]</a><span class="k">class</span> <span class="nc">SystemFlag</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;System flag codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">USER</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">SYSTEM</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">QLI</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">CHECK_CONSTRAINT</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">REFERENTIAL_CONSTRAINT</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">VIEW_CHECK</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">IDENTITY_GENERATOR</span> <span class="o">=</span> <span class="mi">6</span></div>

<div class="viewcode-block" id="ShadowFlag"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ShadowFlag">[docs]</a><span class="k">class</span> <span class="nc">ShadowFlag</span><span class="p">(</span><span class="n">IntFlag</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shadow file flags.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">INACTIVE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">MANUAL</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">CONDITIONAL</span> <span class="o">=</span> <span class="mi">16</span></div>

<div class="viewcode-block" id="RelationType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.RelationType">[docs]</a><span class="k">class</span> <span class="nc">RelationType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Relation type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">PERSISTENT</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">VIEW</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">EXTERNAL</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">VIRTUAL</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">GLOBAL_TEMPORARY_PRESERVE</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">GLOBAL_TEMPORARY_DELETE</span> <span class="o">=</span> <span class="mi">5</span></div>

<div class="viewcode-block" id="ProcedureType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureType">[docs]</a><span class="k">class</span> <span class="nc">ProcedureType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Procedure type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LEGACY</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">SELECTABLE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">EXECUTABLE</span> <span class="o">=</span> <span class="mi">2</span></div>

<div class="viewcode-block" id="ParameterMechanism"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ParameterMechanism">[docs]</a><span class="k">class</span> <span class="nc">ParameterMechanism</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameter mechanism type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">NORMAL</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">TYPE_OF</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="TypeFrom"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TypeFrom">[docs]</a><span class="k">class</span> <span class="nc">TypeFrom</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Source of parameter datatype codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DATATYPE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DOMAIN</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TYPE_OF_DOMAIN</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">TYPE_OF_COLUMN</span> <span class="o">=</span> <span class="mi">3</span></div>

<div class="viewcode-block" id="ParameterType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ParameterType">[docs]</a><span class="k">class</span> <span class="nc">ParameterType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameter type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">INPUT</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">OUTPUT</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="IdentityType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.IdentityType">[docs]</a><span class="k">class</span> <span class="nc">IdentityType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Identity type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ALWAYS</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">BY_DEFAULT</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="GrantOption"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.GrantOption">[docs]</a><span class="k">class</span> <span class="nc">GrantOption</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Grant option codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">NONE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">GRANT_OPTION</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">ADMIN_OPTION</span> <span class="o">=</span> <span class="mi">2</span></div>

<div class="viewcode-block" id="PageType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.PageType">[docs]</a><span class="k">class</span> <span class="nc">PageType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Page type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">HEADER</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">PAGE_INVENTORY</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">TRANSACTION_INVENTORY</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">POINTER</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">DATA</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">INDEX_ROOT</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">INDEX_BUCKET</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">BLOB</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">GENERATOR</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">SCN_INVENTORY</span> <span class="o">=</span> <span class="mi">10</span></div>

<div class="viewcode-block" id="MapTo"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.MapTo">[docs]</a><span class="k">class</span> <span class="nc">MapTo</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Map to type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">USER</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ROLE</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="TriggerType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TriggerType">[docs]</a><span class="k">class</span> <span class="nc">TriggerType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Trigger type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DML</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DB</span> <span class="o">=</span> <span class="mi">8192</span>
    <span class="n">DDL</span> <span class="o">=</span> <span class="mi">16384</span></div>

<div class="viewcode-block" id="DDLTrigger"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DDLTrigger">[docs]</a><span class="k">class</span> <span class="nc">DDLTrigger</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;DDL trigger type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ANY</span> <span class="o">=</span> <span class="mi">4611686018427375615</span>
    <span class="n">CREATE_TABLE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">ALTER_TABLE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">DROP_TABLE</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">CREATE_PROCEDURE</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">ALTER_PROCEDURE</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">DROP_PROCEDURE</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">CREATE_FUNCTION</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">ALTER_FUNCTION</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">DROP_FUNCTION</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">CREATE_TRIGGER</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">ALTER_TRIGGER</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">DROP_TRIGGER</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="c1"># gap for TRIGGER_TYPE_MASK - 3 bits</span>
    <span class="n">CREATE_EXCEPTION</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">ALTER_EXCEPTION</span> <span class="o">=</span> <span class="mi">17</span>
    <span class="n">DROP_EXCEPTION</span> <span class="o">=</span> <span class="mi">18</span>
    <span class="n">CREATE_VIEW</span> <span class="o">=</span> <span class="mi">19</span>
    <span class="n">ALTER_VIEW</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">DROP_VIEW</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">CREATE_DOMAIN</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">ALTER_DOMAIN</span> <span class="o">=</span> <span class="mi">23</span>
    <span class="n">DROP_DOMAIN</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">CREATE_ROLE</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="n">ALTER_ROLE</span> <span class="o">=</span> <span class="mi">26</span>
    <span class="n">DROP_ROLE</span> <span class="o">=</span> <span class="mi">27</span>
    <span class="n">CREATE_INDEX</span> <span class="o">=</span> <span class="mi">28</span>
    <span class="n">ALTER_INDEX</span> <span class="o">=</span> <span class="mi">29</span>
    <span class="n">DROP_INDEX</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">CREATE_SEQUENCE</span> <span class="o">=</span> <span class="mi">31</span>
    <span class="n">ALTER_SEQUENCE</span> <span class="o">=</span> <span class="mi">32</span>
    <span class="n">DROP_SEQUENCE</span> <span class="o">=</span> <span class="mi">33</span>
    <span class="n">CREATE_USER</span> <span class="o">=</span> <span class="mi">34</span>
    <span class="n">ALTER_USER</span> <span class="o">=</span> <span class="mi">35</span>
    <span class="n">DROP_USER</span> <span class="o">=</span> <span class="mi">36</span>
    <span class="n">CREATE_COLLATION</span> <span class="o">=</span> <span class="mi">37</span>
    <span class="n">DROP_COLLATION</span> <span class="o">=</span> <span class="mi">38</span>
    <span class="n">ALTER_CHARACTER_SET</span> <span class="o">=</span> <span class="mi">39</span>
    <span class="n">CREATE_PACKAGE</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">ALTER_PACKAGE</span> <span class="o">=</span> <span class="mi">41</span>
    <span class="n">DROP_PACKAGE</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="n">CREATE_PACKAGE_BODY</span> <span class="o">=</span> <span class="mi">43</span>
    <span class="n">DROP_PACKAGE_BODY</span> <span class="o">=</span> <span class="mi">44</span>
    <span class="n">CREATE_MAPPING</span> <span class="o">=</span> <span class="mi">45</span>
    <span class="n">ALTER_MAPPING</span> <span class="o">=</span> <span class="mi">46</span>
    <span class="n">DROP_MAPPING</span> <span class="o">=</span> <span class="mi">47</span></div>

<div class="viewcode-block" id="DBTrigger"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DBTrigger">[docs]</a><span class="k">class</span> <span class="nc">DBTrigger</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Database trigger type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">CONNECT</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DISCONNECT</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TRANSACTION_START</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">TRANSACTION_COMMIT</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">TRANSACTION_ROLLBACK</span> <span class="o">=</span> <span class="mi">4</span></div>

<div class="viewcode-block" id="DMLTrigger"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DMLTrigger">[docs]</a><span class="k">class</span> <span class="nc">DMLTrigger</span><span class="p">(</span><span class="n">IntFlag</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;DML trigger type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">INSERT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">UPDATE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">DELETE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span></div>

<div class="viewcode-block" id="TriggerTime"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TriggerTime">[docs]</a><span class="k">class</span> <span class="nc">TriggerTime</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Trigger action time codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">BEFORE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">AFTER</span> <span class="o">=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="ConstraintType"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ConstraintType">[docs]</a><span class="k">class</span> <span class="nc">ConstraintType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Contraint type codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">CHECK</span> <span class="o">=</span> <span class="s1">&#39;CHECK&#39;</span>
    <span class="n">NOT_NULL</span> <span class="o">=</span> <span class="s1">&#39;NOT NULL&#39;</span>
    <span class="n">FOREIGN_KEY</span> <span class="o">=</span> <span class="s1">&#39;FOREIGN KEY&#39;</span>
    <span class="n">PRIMARY_KEY</span> <span class="o">=</span> <span class="s1">&#39;PRIMARY KEY&#39;</span>
    <span class="n">UNIQUE</span> <span class="o">=</span> <span class="s1">&#39;UNIQUE&#39;</span></div>

<div class="viewcode-block" id="Section"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Section">[docs]</a><span class="k">class</span> <span class="nc">Section</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;DDL script sections. Used by `.Schema.get_metadata_ddl()`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">COLLATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">CHARACTER_SETS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">UDFS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">GENERATORS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">EXCEPTIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">DOMAINS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PACKAGE_DEFS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">FUNCTION_DEFS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PROCEDURE_DEFS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">TABLES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PRIMARY_KEYS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">UNIQUE_CONSTRAINTS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">CHECK_CONSTRAINTS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">FOREIGN_CONSTRAINTS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">INDICES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">VIEWS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PACKAGE_BODIES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PROCEDURE_BODIES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">FUNCTION_BODIES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">TRIGGERS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">ROLES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">GRANTS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">COMMENTS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">SHADOWS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">SET_GENERATORS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">INDEX_DEACTIVATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">INDEX_ACTIVATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">TRIGGER_DEACTIVATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">TRIGGER_ACTIVATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span></div>

<div class="viewcode-block" id="Category"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Category">[docs]</a><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schema information collection categories.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">TABLES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">VIEWS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">DOMAINS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">INDICES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">DEPENDENCIES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">GENERATORS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">SEQUENCES</span> <span class="o">=</span> <span class="n">GENERATORS</span>
    <span class="n">TRIGGERS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PROCEDURES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">CONSTRAINTS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">COLLATIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">CHARACTER_SETS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">EXCEPTIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">ROLES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">FUNCTIONS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">FILES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">SHADOWS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PRIVILEGES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">USERS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">PACKAGES</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">BACKUP_HISTORY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">FILTERS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span></div>

<div class="viewcode-block" id="Privacy"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privacy">[docs]</a><span class="k">class</span> <span class="nc">Privacy</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Privacy flag codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">PUBLIC</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">PRIVATE</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Legacy"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Legacy">[docs]</a><span class="k">class</span> <span class="nc">Legacy</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Legacy flag codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">NEW_STYLE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">LEGACY_STYLE</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="PrivilegeCode"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.PrivilegeCode">[docs]</a><span class="k">class</span> <span class="nc">PrivilegeCode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Priviledge codes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SELECT</span> <span class="o">=</span> <span class="s1">&#39;S&#39;</span>
    <span class="n">INSERT</span> <span class="o">=</span> <span class="s1">&#39;I&#39;</span>
    <span class="n">UPDATE</span> <span class="o">=</span> <span class="s1">&#39;U&#39;</span>
    <span class="n">DELETE</span> <span class="o">=</span> <span class="s1">&#39;D&#39;</span>
    <span class="n">REFERENCES</span> <span class="o">=</span> <span class="s1">&#39;R&#39;</span>
    <span class="n">EXECUTE</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span>
    <span class="n">USAGE</span> <span class="o">=</span> <span class="s1">&#39;G&#39;</span>
    <span class="n">CREATE</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span>
    <span class="n">ALTER</span> <span class="o">=</span> <span class="s1">&#39;L&#39;</span>
    <span class="n">DROP</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
    <span class="n">MEMBERSHIP</span> <span class="o">=</span> <span class="s1">&#39;M&#39;</span></div>

<div class="viewcode-block" id="CollationFlag"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.CollationFlag">[docs]</a><span class="k">class</span> <span class="nc">CollationFlag</span><span class="p">(</span><span class="n">IntFlag</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Collation attribute flags.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">NONE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">PAD_SPACE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">CASE_INSENSITIVE</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ACCENT_INSENSITIVE</span> <span class="o">=</span> <span class="mi">4</span></div>

<span class="c1">#: List of default sections (in order) for `.Schema.get_metadata_ddl()`</span>
<span class="n">SCRIPT_DEFAULT_ORDER</span> <span class="o">=</span> <span class="p">[</span><span class="n">Section</span><span class="o">.</span><span class="n">COLLATIONS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">CHARACTER_SETS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">UDFS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">GENERATORS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">EXCEPTIONS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">DOMAINS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">PACKAGE_DEFS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">FUNCTION_DEFS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">PROCEDURE_DEFS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">TABLES</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">PRIMARY_KEYS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">UNIQUE_CONSTRAINTS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">CHECK_CONSTRAINTS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">FOREIGN_CONSTRAINTS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">INDICES</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">VIEWS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">PACKAGE_BODIES</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">PROCEDURE_BODIES</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">FUNCTION_BODIES</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">TRIGGERS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">GRANTS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">ROLES</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">COMMENTS</span><span class="p">,</span>
                        <span class="n">Section</span><span class="o">.</span><span class="n">SHADOWS</span><span class="p">,</span> <span class="n">Section</span><span class="o">.</span><span class="n">SET_GENERATORS</span><span class="p">]</span>


<div class="viewcode-block" id="get_grants"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.get_grants">[docs]</a><span class="k">def</span> <span class="nf">get_grants</span><span class="p">(</span><span class="n">privileges</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Privilege</span><span class="p">],</span> <span class="n">grantors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get list of minimal set of SQL GRANT statamenets necessary to grant</span>
<span class="sd">    specified privileges.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        privileges: List of :class:`Privilege` instances.</span>

<span class="sd">    Keyword Args:</span>
<span class="sd">        grantors: List of standard grantor names. Generates GRANTED BY</span>
<span class="sd">            clause for privileges granted by user that&#39;s not in list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tp</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">SELECT</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">INSERT</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">,</span>
             <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">DELETE</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">REFERENCES</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">skey</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">user_name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">user_type</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">grantor_name</span><span class="p">,</span>
                <span class="n">item</span><span class="o">.</span><span class="n">subject_name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">subject_type</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">has_grant</span><span class="p">(),</span>
                <span class="n">item</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">in</span> <span class="n">tp</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">privilege</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">field_name</span><span class="p">),)</span>
    <span class="k">def</span> <span class="nf">gkey</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">user_name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">user_type</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">grantor_name</span><span class="p">,</span>
                <span class="n">item</span><span class="o">.</span><span class="n">subject_name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">subject_type</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">has_grant</span><span class="p">(),</span>
                <span class="n">item</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">in</span> <span class="n">tp</span><span class="p">,)</span>
    <span class="k">def</span> <span class="nf">gkey2</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">privilege</span><span class="o">.</span><span class="n">name</span>

    <span class="n">grants</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">privileges</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">skey</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">gkey</span><span class="p">):</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">has_grant</span><span class="p">():</span>
            <span class="n">admin_option</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; WITH </span><span class="si">{</span><span class="s1">&#39;ADMIN&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">item</span><span class="o">.</span><span class="n">privilege</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">MEMBERSHIP</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;GRANT&#39;</span><span class="si">}</span><span class="s2"> OPTION&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">admin_option</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">uname</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">user_name</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">user</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;PROCEDURE &#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">Trigger</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;TRIGGER &#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">View</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;VIEW &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">sname</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">subject_name</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">grantors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">grantor_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grantors</span><span class="p">):</span>
            <span class="n">granted_by</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; GRANTED BY </span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">grantor_name</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">granted_by</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">priv_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">gkey2</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">in</span> <span class="n">tp</span><span class="p">:</span>
                <span class="n">privilege</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">privilege</span><span class="o">.</span><span class="n">name</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">privilege</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">field_name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">field_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">privilege</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">field_name</span><span class="si">}</span><span class="s1">)&#39;</span>
                <span class="n">priv_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">privilege</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">EXECUTE</span><span class="p">:</span> <span class="c1"># procedure</span>
                <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;EXECUTE ON PROCEDURE &#39;</span>
            <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">MEMBERSHIP</span><span class="p">:</span>
                <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">priv_list</span><span class="p">:</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">priv_list</span><span class="p">)</span>
            <span class="n">privilege</span> <span class="o">+=</span> <span class="s1">&#39; ON &#39;</span>
        <span class="n">grants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;GRANT </span><span class="si">{</span><span class="n">privilege</span><span class="si">}{</span><span class="n">sname</span><span class="si">}</span><span class="s1"> TO </span><span class="si">{</span><span class="n">utype</span><span class="si">}{</span><span class="n">uname</span><span class="si">}{</span><span class="n">admin_option</span><span class="si">}{</span><span class="n">granted_by</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">grants</span></div>


<span class="k">def</span> <span class="nf">escape_single_quotes</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns `text` with any single quotes escaped (doubled).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Visitable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Visitable">[docs]</a><span class="k">class</span> <span class="nc">Visitable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for Visitor Pattern support.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Visitable.accept"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Visitable.accept">[docs]</a>    <span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visitor</span><span class="p">:</span> <span class="n">Visitor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Visitor Pattern support.</span>

<span class="sd">        Calls `visit(self)` on parameter object.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            visitor: Visitor object of Visitor Pattern.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="Visitor"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Visitor">[docs]</a><span class="k">class</span> <span class="nc">Visitor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for Visitor Pattern visitors.</span>

<span class="sd">    Descendants may implement methods to handle individual object types that follow naming</span>
<span class="sd">    pattern `visit_[class_name]`. Calls `.default_action()` if appropriate special method is</span>
<span class="sd">    not defined.</span>

<span class="sd">    .. important::</span>

<span class="sd">       This implementation uses Python Method Resolution Order (__mro__) to find special</span>
<span class="sd">       handling method, so special method for given class is used also for its decendants.</span>

<span class="sd">    Example::</span>

<span class="sd">       class Node(object): pass</span>
<span class="sd">       class A(Node): pass</span>
<span class="sd">       class B(Node): pass</span>
<span class="sd">       class C(A,B): pass</span>

<span class="sd">       class MyVisitor(object):</span>
<span class="sd">           def default_action(self, obj):</span>
<span class="sd">               print(&#39;default_action &#39;, obj.__class__.__name__)</span>

<span class="sd">           def visit_b(self, obj):</span>
<span class="sd">               print(&#39;visit_b &#39;, obj.__class__.__name__)</span>


<span class="sd">       a = A()</span>
<span class="sd">       b = B()</span>
<span class="sd">       c = C()</span>
<span class="sd">       visitor = MyVisitor()</span>
<span class="sd">       visitor.visit(a)</span>
<span class="sd">       visitor.visit(b)</span>
<span class="sd">       visitor.visit(c)</span>

<span class="sd">    Will create output::</span>

<span class="sd">       default_action A</span>
<span class="sd">       visit_b B</span>
<span class="sd">       visit_b C</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Visitor.visit"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Visitor.visit">[docs]</a>    <span class="k">def</span> <span class="nf">visit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Visitable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dispatch to method that handles `obj`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            obj: Object to be handled by visitor.</span>

<span class="sd">        First traverses the `obj.__mro__` to try find method with name following</span>
<span class="sd">        `visit_&lt;lower_class_name&gt;` pattern and calls it with `obj`. Otherwise it calls</span>
<span class="sd">        `.default_action()`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">meth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">meth</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;visit_&#39;</span><span class="o">+</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">meth</span><span class="p">:</span>
            <span class="n">meth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_action</span>
        <span class="k">return</span> <span class="n">meth</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>
<div class="viewcode-block" id="Visitor.default_action"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Visitor.default_action">[docs]</a>    <span class="k">def</span> <span class="nf">default_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Visitable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default handler for visited objects.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            obj: Object to be handled.</span>

<span class="sd">        Note:</span>
<span class="sd">            Default implementation does nothing!</span>
<span class="sd">        &quot;&quot;&quot;</span></div></div>

<div class="viewcode-block" id="Schema"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema">[docs]</a><span class="k">class</span> <span class="nc">Schema</span><span class="p">(</span><span class="n">Visitable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class represents database schema.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#: Configuration option - Always quote db object names on output</span>
    <span class="n">opt_always_quote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1">#: Configuration option - Keyword for generator/sequence</span>
    <span class="n">opt_generator_keyword</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;SEQUENCE&#39;</span>
    <span class="c1">#: Datatype declaration methods for procedure parameters (key = numID, value = name)</span>
    <span class="n">param_type_from</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;DATATYPE&#39;</span><span class="p">,</span>
                         <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;DOMAIN&#39;</span><span class="p">,</span>
                         <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;TYPE OF DOMAIN&#39;</span><span class="p">,</span>
                         <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;TYPE OF COLUMN&#39;</span><span class="p">}</span>
    <span class="c1">#: Object types (key = numID, value = type_name)</span>
    <span class="n">object_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Object type codes (key = type_name, value = numID)</span>
    <span class="n">object_type_codes</span><span class="p">:</span>  <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Character set names (key = numID, value = charset_name)</span>
    <span class="n">character_set_names</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Field types (key = numID, value = type_name)</span>
    <span class="n">field_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Field sub types (key = numID, value = type_name)</span>
    <span class="n">field_subtypes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Function types (key = numID, value = type_name)</span>
    <span class="n">function_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Mechanism Types (key = numID, value = type_name)</span>
    <span class="n">mechanism_types</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Parameter Mechanism Types (key = numID, value = type_name)</span>
    <span class="n">parameter_mechanism_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Procedure Types (key = numID, value = type_name)</span>
    <span class="n">procedure_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Relation Types (key = numID, value = type_name)</span>
    <span class="n">relation_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: System Flag Types (key = numID, value = type_name)</span>
    <span class="n">system_flag_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Transaction State Types (key = numID, value = type_name)</span>
    <span class="n">transaction_state_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Trigger Types (key = numID, value = type_name)</span>
    <span class="n">trigger_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Parameter Types (key = numID, value = type_name)</span>
    <span class="n">parameter_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Index activity status (key = numID, value = flag_name)</span>
    <span class="n">index_activity_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Index uniqueness (key = numID, value = flag_name)</span>
    <span class="n">index_unique_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Trigger activity status (key = numID, value = flag_name)</span>
    <span class="n">trigger_activity_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Grant option (key = numID, value = option_name)</span>
    <span class="n">grant_options</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Page type (key = numID, value = type_name)</span>
    <span class="n">page_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Privacy flags (numID, value = flag_name)</span>
    <span class="n">privacy_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Legacy flags (numID, value = flag_name)</span>
    <span class="n">legacy_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Determinism flags (numID, value = flag_name)</span>
    <span class="n">deterministic_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1">#: Identity type (key = numID, value = type_name)</span>
    <span class="n">identity_type</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_con</span><span class="p">:</span> <span class="n">Connection</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="p">:</span> <span class="n">Cursor</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__internal</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Engine/ODS specific data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ods</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># database metadata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tables</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__views</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__domains</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__indices</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__constraint_indices</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dependencies</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__generators</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__triggers</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__procedures</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__character_sets</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__exceptions</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roles</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__functions</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__files</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__shadows</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__privileges</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__users</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__packages</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__backup_history</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__filters</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__attrs</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_charset_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__owner</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Schema</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__fail_if_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s2">&quot;Schema is not binded to connection.&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_con</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="nf">_set_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__internal</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">def</span> <span class="nf">__clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Category</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Category</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Category</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">TABLES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__tables</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">VIEWS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__views</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">DOMAINS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__domains</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">INDICES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__indices</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__constraint_indices</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">DEPENDENCIES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__dependencies</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">GENERATORS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__generators</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">TRIGGERS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__triggers</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">PROCEDURES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__procedures</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">CONSTRAINTS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">COLLATIONS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">CHARACTER_SETS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__character_sets</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">EXCEPTIONS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__exceptions</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">ROLES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__roles</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">FUNCTIONS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__functions</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">,</span> <span class="n">DataList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">FILES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__files</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">SHADOWS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__shadows</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">PRIVILEGES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__privileges</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">USERS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__users</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">PACKAGES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__packages</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">BACKUP_HISTORY</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__backup_history</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">Category</span><span class="o">.</span><span class="n">FILTERS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__filters</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="nf">_select_row</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Statement</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">params</span><span class="p">:</span> <span class="n">List</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span> <span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">))}</span>
    <span class="k">def</span> <span class="nf">_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">List</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">description</span>
        <span class="k">return</span> <span class="p">({</span><span class="n">desc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span> <span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">))}</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_field_dimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;select RDB$LOWER_BOUND, RDB$UPPER_BOUND</span>
<span class="s2">                from RDB$FIELD_DIMENSIONS where RDB$FIELD_NAME = &#39;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; order by RDB$DIMENSION&quot;&quot;&quot;</span><span class="p">)]</span>
    <span class="k">def</span> <span class="nf">_get_all_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Domain</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Domain</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Domain</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__domains</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$VALIDATION_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$COMPUTED_SOURCE&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_SCALE&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$FIELD_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_SUB_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SEGMENT_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$EXTERNAL_LENGTH&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$EXTERNAL_SCALE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$EXTERNAL_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DIMENSIONS&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$CHARACTER_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_PRECISION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">]</span>
            <span class="n">domains</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from RDB$FIELDS&quot;</span><span class="p">)),</span>
                               <span class="n">Domain</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_domains</span><span class="p">,</span> <span class="n">user_domains</span> <span class="o">=</span> <span class="n">domains</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__domains</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_domains</span><span class="p">,</span> <span class="n">sys_domains</span><span class="p">,</span> <span class="n">domains</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__domains</span>
    <span class="k">def</span> <span class="nf">_get_all_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Table</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Table</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Table</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">tables</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                               <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$relations where rdb$view_blr is null&#39;</span><span class="p">)),</span>
                              <span class="n">Table</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_tables</span><span class="p">,</span> <span class="n">user_tables</span> <span class="o">=</span> <span class="n">tables</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tables</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_tables</span><span class="p">,</span> <span class="n">sys_tables</span><span class="p">,</span> <span class="n">tables</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tables</span>
    <span class="k">def</span> <span class="nf">_get_all_views</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">View</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">View</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">View</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__views</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">views</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">View</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                              <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$relations where rdb$view_blr is not null&#39;</span><span class="p">)),</span>
                             <span class="n">View</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_views</span><span class="p">,</span> <span class="n">user_views</span> <span class="o">=</span> <span class="n">views</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__views</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_views</span><span class="p">,</span> <span class="n">sys_views</span><span class="p">,</span> <span class="n">views</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__views</span>
    <span class="k">def</span> <span class="nf">_get_constraint_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint_indices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select RDB$INDEX_NAME, RDB$CONSTRAINT_NAME</span>
<span class="s2">            from RDB$RELATION_CONSTRAINTS where RDB$INDEX_NAME is not null&quot;&quot;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint_indices</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span>
                                         <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint_indices</span>
    <span class="k">def</span> <span class="nf">_get_all_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__indices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="c1"># Dummy call to _get_constraint_indices() is necessary as</span>
            <span class="c1"># Index.is_sys_object() that is called in Index.__init__() will</span>
            <span class="c1"># drop result from internal cursor and we&#39;ll not load all indices.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_constraint_indices</span><span class="p">()</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ods</span> <span class="o">&lt;</span> <span class="mf">13.0</span> <span class="k">else</span>  <span class="s1">&#39;, RDB$CONDITION_SOURCE&#39;</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;select RDB$INDEX_NAME, RDB$RELATION_NAME, RDB$INDEX_ID,</span>
<span class="s2">            RDB$UNIQUE_FLAG, RDB$DESCRIPTION, RDB$SEGMENT_COUNT, RDB$INDEX_INACTIVE,</span>
<span class="s2">            RDB$INDEX_TYPE, RDB$FOREIGN_KEY, RDB$SYSTEM_FLAG, RDB$EXPRESSION_SOURCE,</span>
<span class="s2">            RDB$STATISTICS</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2"> from RDB$INDICES&quot;&quot;&quot;</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span>
                               <span class="n">Index</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_indices</span><span class="p">,</span> <span class="n">user_indices</span> <span class="o">=</span> <span class="n">indices</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__indices</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_indices</span><span class="p">,</span> <span class="n">sys_indices</span><span class="p">,</span> <span class="n">indices</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__indices</span>
    <span class="k">def</span> <span class="nf">_get_all_generators</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Sequence</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Sequence</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Sequence</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__generators</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$GENERATOR_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$GENERATOR_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$INITIAL_VALUE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$GENERATOR_INCREMENT&#39;</span><span class="p">]</span>
            <span class="n">generators</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                   <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from rdb$generators&quot;</span><span class="p">)),</span>
                                  <span class="n">Sequence</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_generators</span><span class="p">,</span> <span class="n">user_generators</span> <span class="o">=</span> <span class="n">generators</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span>
                                                               <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__generators</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_generators</span><span class="p">,</span> <span class="n">sys_generators</span><span class="p">,</span> <span class="n">generators</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__generators</span>
    <span class="k">def</span> <span class="nf">_get_all_triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__triggers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$TRIGGER_SEQUENCE&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$TRIGGER_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$TRIGGER_INACTIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FLAGS&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$VALID_BLR&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">]</span>
            <span class="n">triggers</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                 <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from RDB$TRIGGERS&quot;</span><span class="p">)),</span>
                                <span class="n">Trigger</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_triggers</span><span class="p">,</span> <span class="n">user_triggers</span> <span class="o">=</span> <span class="n">triggers</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__triggers</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_triggers</span><span class="p">,</span> <span class="n">sys_triggers</span><span class="p">,</span> <span class="n">triggers</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__triggers</span>
    <span class="k">def</span> <span class="nf">_get_all_procedures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__procedures</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PROCEDURE_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PROCEDURE_INPUTS&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$PROCEDURE_OUTPUTS&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PROCEDURE_SOURCE&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$PROCEDURE_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$VALID_BLR&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PRIVATE_FLAG&#39;</span><span class="p">]</span>
            <span class="n">procedures</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Procedure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                   <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from rdb$procedures&quot;</span><span class="p">)),</span>
                                  <span class="n">Procedure</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_procedures</span><span class="p">,</span> <span class="n">user_procedures</span> <span class="o">=</span> <span class="n">procedures</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span>
                                                               <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__procedures</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_procedures</span><span class="p">,</span> <span class="n">sys_procedures</span><span class="p">,</span> <span class="n">procedures</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__procedures</span>
    <span class="k">def</span> <span class="nf">_get_all_functions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">],</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__functions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FUNCTION_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$MODULE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$RETURN_ARGUMENT&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$PRIVATE_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FUNCTION_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FUNCTION_ID&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$VALID_BLR&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$LEGACY_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DETERMINISTIC_FLAG&#39;</span><span class="p">]</span>
            <span class="n">functions</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                  <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from rdb$functions&quot;</span><span class="p">)),</span>
                                 <span class="n">Function</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">sys_functions</span><span class="p">,</span> <span class="n">user_functions</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">(),</span>
                                                            <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__functions</span> <span class="o">=</span> <span class="p">(</span><span class="n">user_functions</span><span class="p">,</span> <span class="n">sys_functions</span><span class="p">,</span> <span class="n">functions</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__functions</span>
    <span class="k">def</span> <span class="nf">_get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">UserInfo</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__users</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select distinct(RDB$USER) FROM RDB$USER_PRIVILEGES&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__users</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">UserInfo</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="p">),</span>
                                    <span class="n">UserInfo</span><span class="p">,</span> <span class="s1">&#39;item.user_name&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__users</span>
<div class="viewcode-block" id="Schema.bind"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.bind">[docs]</a>    <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">:</span> <span class="n">Connection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Schema</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Bind this instance to specified connection`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            connection: `~firebird.driver.core.Connection` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__internal</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s2">&quot;Call to &#39;bind&#39; not allowed for embedded Schema.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_con</span> <span class="o">=</span> <span class="n">connection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_con</span><span class="o">.</span><span class="n">transaction_manager</span><span class="p">(</span><span class="n">tpb</span><span class="p">(</span><span class="n">Isolation</span><span class="o">.</span><span class="n">READ_COMMITTED_RECORD_VERSION</span><span class="p">,</span>
                                                     <span class="n">access_mode</span><span class="o">=</span><span class="n">TraAccessMode</span><span class="o">.</span><span class="n">READ</span><span class="p">))</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">_logging_id_</span> <span class="o">=</span> <span class="s1">&#39;schema.internal_cursor&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_con</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">ods</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ods</span> <span class="o">==</span> <span class="mf">12.0</span><span class="p">:</span> <span class="c1"># Firebird 3</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ABS&#39;</span><span class="p">,</span> <span class="s1">&#39;ACOS&#39;</span><span class="p">,</span> <span class="s1">&#39;ACOSH&#39;</span><span class="p">,</span> <span class="s1">&#39;ACTIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;ADD&#39;</span><span class="p">,</span> <span class="s1">&#39;ADMIN&#39;</span><span class="p">,</span> <span class="s1">&#39;AFTER&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ALL&#39;</span><span class="p">,</span> <span class="s1">&#39;ALTER&#39;</span><span class="p">,</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="s1">&#39;ANY&#39;</span><span class="p">,</span> <span class="s1">&#39;AS&#39;</span><span class="p">,</span> <span class="s1">&#39;ASC&#39;</span><span class="p">,</span> <span class="s1">&#39;ASCENDING&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ASCII_CHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;ASCII_VAL&#39;</span><span class="p">,</span> <span class="s1">&#39;ASIN&#39;</span><span class="p">,</span> <span class="s1">&#39;ASINH&#39;</span><span class="p">,</span> <span class="s1">&#39;AT&#39;</span><span class="p">,</span> <span class="s1">&#39;ATAN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ATAN2&#39;</span><span class="p">,</span> <span class="s1">&#39;ATANH&#39;</span><span class="p">,</span> <span class="s1">&#39;AUTO&#39;</span><span class="p">,</span> <span class="s1">&#39;AUTONOMOUS&#39;</span><span class="p">,</span> <span class="s1">&#39;AVG&#39;</span><span class="p">,</span> <span class="s1">&#39;BEFORE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;BEGIN&#39;</span><span class="p">,</span> <span class="s1">&#39;BETWEEN&#39;</span><span class="p">,</span> <span class="s1">&#39;BIGINT&#39;</span><span class="p">,</span> <span class="s1">&#39;BIN_AND&#39;</span><span class="p">,</span> <span class="s1">&#39;BIN_NOT&#39;</span><span class="p">,</span> <span class="s1">&#39;BIN_OR&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;BIN_SHL&#39;</span><span class="p">,</span> <span class="s1">&#39;BIN_SHR&#39;</span><span class="p">,</span> <span class="s1">&#39;BIN_XOR&#39;</span><span class="p">,</span> <span class="s1">&#39;BIT_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;BLOB&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;BOOLEAN&#39;</span><span class="p">,</span> <span class="s1">&#39;BOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;BY&#39;</span><span class="p">,</span> <span class="s1">&#39;CASE&#39;</span><span class="p">,</span> <span class="s1">&#39;CAST&#39;</span><span class="p">,</span> <span class="s1">&#39;CEIL&#39;</span><span class="p">,</span> <span class="s1">&#39;CEILING&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;CHAR_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;CHAR_TO_UUID&#39;</span><span class="p">,</span> <span class="s1">&#39;CHARACTER&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CHARACTER_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;CHECK&#39;</span><span class="p">,</span> <span class="s1">&#39;CLOSE&#39;</span><span class="p">,</span> <span class="s1">&#39;COLLATE&#39;</span><span class="p">,</span> <span class="s1">&#39;COLUMN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;COMMIT&#39;</span><span class="p">,</span> <span class="s1">&#39;COMMITTED&#39;</span><span class="p">,</span> <span class="s1">&#39;COMPUTED&#39;</span><span class="p">,</span> <span class="s1">&#39;CONDITIONAL&#39;</span><span class="p">,</span> <span class="s1">&#39;CONNECT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CONSTRAINT&#39;</span><span class="p">,</span> <span class="s1">&#39;CONTAINING&#39;</span><span class="p">,</span> <span class="s1">&#39;CORR&#39;</span><span class="p">,</span> <span class="s1">&#39;COS&#39;</span><span class="p">,</span> <span class="s1">&#39;COSH&#39;</span><span class="p">,</span> <span class="s1">&#39;COT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;COVAR_POP&#39;</span><span class="p">,</span> <span class="s1">&#39;COVAR_SAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;CREATE&#39;</span><span class="p">,</span> <span class="s1">&#39;CROSS&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CSTRING&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_CONNECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_DATE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CURRENT_ROLE&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_TIME&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_TIMESTAMP&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CURRENT_TRANSACTION&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_USER&#39;</span><span class="p">,</span> <span class="s1">&#39;CURSOR&#39;</span><span class="p">,</span> <span class="s1">&#39;DATABASE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="s1">&#39;DATEADD&#39;</span><span class="p">,</span> <span class="s1">&#39;DATEDIFF&#39;</span><span class="p">,</span> <span class="s1">&#39;DAY&#39;</span><span class="p">,</span> <span class="s1">&#39;DDL&#39;</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;DECIMAL&#39;</span><span class="p">,</span> <span class="s1">&#39;DECLARE&#39;</span><span class="p">,</span> <span class="s1">&#39;DECODE&#39;</span><span class="p">,</span> <span class="s1">&#39;DEFAULT&#39;</span><span class="p">,</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;DENSE_RANK&#39;</span><span class="p">,</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span> <span class="s1">&#39;DESCENDING&#39;</span><span class="p">,</span> <span class="s1">&#39;DETERMINISTIC&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;DISCONNECT&#39;</span><span class="p">,</span> <span class="s1">&#39;DISTINCT&#39;</span><span class="p">,</span> <span class="s1">&#39;DO&#39;</span><span class="p">,</span> <span class="s1">&#39;DOMAIN&#39;</span><span class="p">,</span> <span class="s1">&#39;DOUBLE&#39;</span><span class="p">,</span> <span class="s1">&#39;DROP&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ELSE&#39;</span><span class="p">,</span> <span class="s1">&#39;END&#39;</span><span class="p">,</span> <span class="s1">&#39;ENTRY_POINT&#39;</span><span class="p">,</span> <span class="s1">&#39;ESCAPE&#39;</span><span class="p">,</span> <span class="s1">&#39;EXCEPTION&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;EXECUTE&#39;</span><span class="p">,</span> <span class="s1">&#39;EXISTS&#39;</span><span class="p">,</span> <span class="s1">&#39;EXIT&#39;</span><span class="p">,</span> <span class="s1">&#39;EXP&#39;</span><span class="p">,</span> <span class="s1">&#39;EXTERNAL&#39;</span><span class="p">,</span> <span class="s1">&#39;EXTRACT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;FETCH&#39;</span><span class="p">,</span> <span class="s1">&#39;FILE&#39;</span><span class="p">,</span> <span class="s1">&#39;FILTER&#39;</span><span class="p">,</span> <span class="s1">&#39;FIRST_VALUE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;FIRSTNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;FLOAT&#39;</span><span class="p">,</span> <span class="s1">&#39;FLOOR&#39;</span><span class="p">,</span> <span class="s1">&#39;FOR&#39;</span><span class="p">,</span> <span class="s1">&#39;FOREIGN&#39;</span><span class="p">,</span> <span class="s1">&#39;FROM&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;FUNCTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GDSCODE&#39;</span><span class="p">,</span> <span class="s1">&#39;GENERATOR&#39;</span><span class="p">,</span> <span class="s1">&#39;GEN_ID&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;GEN_UUID&#39;</span><span class="p">,</span> <span class="s1">&#39;GLOBAL&#39;</span><span class="p">,</span> <span class="s1">&#39;GRANT&#39;</span><span class="p">,</span> <span class="s1">&#39;GRANTED&#39;</span><span class="p">,</span> <span class="s1">&#39;GROUP&#39;</span><span class="p">,</span> <span class="s1">&#39;HASH&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;HAVING&#39;</span><span class="p">,</span> <span class="s1">&#39;HOUR&#39;</span><span class="p">,</span> <span class="s1">&#39;IDENTITY&#39;</span><span class="p">,</span> <span class="s1">&#39;IF&#39;</span><span class="p">,</span> <span class="s1">&#39;IN&#39;</span><span class="p">,</span> <span class="s1">&#39;INACTIVE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;INCREMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;INDEX&#39;</span><span class="p">,</span> <span class="s1">&#39;INNER&#39;</span><span class="p">,</span> <span class="s1">&#39;INPUT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;INSENSITIVE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;INSERT&#39;</span><span class="p">,</span> <span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;INTO&#39;</span><span class="p">,</span> <span class="s1">&#39;IS&#39;</span><span class="p">,</span> <span class="s1">&#39;ISOLATION&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;JOIN&#39;</span><span class="p">,</span> <span class="s1">&#39;KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;LAG&#39;</span><span class="p">,</span> <span class="s1">&#39;LAST_VALUE&#39;</span><span class="p">,</span> <span class="s1">&#39;LASTNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;LEAD&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;LEADING&#39;</span><span class="p">,</span> <span class="s1">&#39;LEFT&#39;</span><span class="p">,</span> <span class="s1">&#39;LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;LIKE&#39;</span><span class="p">,</span> <span class="s1">&#39;LIST&#39;</span><span class="p">,</span> <span class="s1">&#39;LN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;LOG&#39;</span><span class="p">,</span> <span class="s1">&#39;LOG10&#39;</span><span class="p">,</span> <span class="s1">&#39;LONG&#39;</span><span class="p">,</span> <span class="s1">&#39;LOWER&#39;</span><span class="p">,</span> <span class="s1">&#39;LPAD&#39;</span><span class="p">,</span> <span class="s1">&#39;MANUAL&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;MAPPING&#39;</span><span class="p">,</span> <span class="s1">&#39;MATCHED&#39;</span><span class="p">,</span> <span class="s1">&#39;MATCHING&#39;</span><span class="p">,</span> <span class="s1">&#39;MAX&#39;</span><span class="p">,</span> <span class="s1">&#39;MAXVALUE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;MERGE&#39;</span><span class="p">,</span> <span class="s1">&#39;MILLISECOND&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDDLENAME&#39;</span><span class="p">,</span> <span class="s1">&#39;MIN&#39;</span><span class="p">,</span> <span class="s1">&#39;MINUTE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;MINVALUE&#39;</span><span class="p">,</span> <span class="s1">&#39;MOD&#39;</span><span class="p">,</span> <span class="s1">&#39;MODULE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;MONTH&#39;</span><span class="p">,</span> <span class="s1">&#39;NAMES&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;NATIONAL&#39;</span><span class="p">,</span> <span class="s1">&#39;NATURAL&#39;</span><span class="p">,</span> <span class="s1">&#39;NCHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;NO&#39;</span><span class="p">,</span> <span class="s1">&#39;NOT&#39;</span><span class="p">,</span> <span class="s1">&#39;NTH_VALUE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;NUMERIC&#39;</span><span class="p">,</span> <span class="s1">&#39;OCTET_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;OF&#39;</span><span class="p">,</span> <span class="s1">&#39;OFFSET&#39;</span><span class="p">,</span> <span class="s1">&#39;ON&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ONLY&#39;</span><span class="p">,</span> <span class="s1">&#39;OPEN&#39;</span><span class="p">,</span> <span class="s1">&#39;OPTION&#39;</span><span class="p">,</span> <span class="s1">&#39;OR&#39;</span><span class="p">,</span> <span class="s1">&#39;ORDER&#39;</span><span class="p">,</span> <span class="s1">&#39;OS_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;OUTER&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;OUTPUT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;OVER&#39;</span><span class="p">,</span> <span class="s1">&#39;OVERFLOW&#39;</span><span class="p">,</span> <span class="s1">&#39;OVERLAY&#39;</span><span class="p">,</span> <span class="s1">&#39;PAGE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;PAGES&#39;</span><span class="p">,</span> <span class="s1">&#39;PAGE_SIZE&#39;</span><span class="p">,</span> <span class="s1">&#39;PARAMETER&#39;</span><span class="p">,</span> <span class="s1">&#39;PARTITION&#39;</span><span class="p">,</span> <span class="s1">&#39;PASSWORD&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;PI&#39;</span><span class="p">,</span> <span class="s1">&#39;PLACING&#39;</span><span class="p">,</span> <span class="s1">&#39;PLAN&#39;</span><span class="p">,</span> <span class="s1">&#39;POSITION&#39;</span><span class="p">,</span> <span class="s1">&#39;POST_EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;POWER&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;PRECISION&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIVILEGES&#39;</span><span class="p">,</span> <span class="s1">&#39;PROCEDURE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;PROTECTED&#39;</span><span class="p">,</span> <span class="s1">&#39;RAND&#39;</span><span class="p">,</span> <span class="s1">&#39;RANK&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DB_KEY&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RDB$RECORD_VERSION&#39;</span><span class="p">,</span> <span class="s1">&#39;READ&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">,</span> <span class="s1">&#39;RECORD_VERSION&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RECREATE&#39;</span><span class="p">,</span> <span class="s1">&#39;RECURSIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;REFERENCES&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_AVGX&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;REGR_AVGY&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_INTERCEPT&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_R2&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;REGR_SLOPE&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_SXX&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_SXY&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_SYY&#39;</span><span class="p">,</span> <span class="s1">&#39;RELEASE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;REPLACE&#39;</span><span class="p">,</span> <span class="s1">&#39;RESERV&#39;</span><span class="p">,</span> <span class="s1">&#39;RESERVING&#39;</span><span class="p">,</span> <span class="s1">&#39;RETAIN&#39;</span><span class="p">,</span> <span class="s1">&#39;RETURN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RETURNING_VALUES&#39;</span><span class="p">,</span> <span class="s1">&#39;RETURNS&#39;</span><span class="p">,</span> <span class="s1">&#39;REVERSE&#39;</span><span class="p">,</span> <span class="s1">&#39;REVOKE&#39;</span><span class="p">,</span> <span class="s1">&#39;RIGHT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ROLLBACK&#39;</span><span class="p">,</span> <span class="s1">&#39;ROUND&#39;</span><span class="p">,</span> <span class="s1">&#39;ROW&#39;</span><span class="p">,</span> <span class="s1">&#39;ROW_COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;ROW_NUMBER&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ROWS&#39;</span><span class="p">,</span> <span class="s1">&#39;RPAD&#39;</span><span class="p">,</span> <span class="s1">&#39;SAVEPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;SCHEMA&#39;</span><span class="p">,</span> <span class="s1">&#39;SCROLL&#39;</span><span class="p">,</span> <span class="s1">&#39;SECOND&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SEGMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;SELECT&#39;</span><span class="p">,</span> <span class="s1">&#39;SENSITIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;SET&#39;</span><span class="p">,</span> <span class="s1">&#39;SHADOW&#39;</span><span class="p">,</span> <span class="s1">&#39;SHARED&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SIGN&#39;</span><span class="p">,</span> <span class="s1">&#39;SIMILAR&#39;</span><span class="p">,</span> <span class="s1">&#39;SIN&#39;</span><span class="p">,</span> <span class="s1">&#39;SINGULAR&#39;</span><span class="p">,</span> <span class="s1">&#39;SINH&#39;</span><span class="p">,</span> <span class="s1">&#39;SIZE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SMALLINT&#39;</span><span class="p">,</span> <span class="s1">&#39;SNAPSHOT&#39;</span><span class="p">,</span> <span class="s1">&#39;SOME&#39;</span><span class="p">,</span> <span class="s1">&#39;SORT&#39;</span><span class="p">,</span> <span class="s1">&#39;SQLCODE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SQLSTATE&#39;</span><span class="p">,</span> <span class="s1">&#39;SQRT&#39;</span><span class="p">,</span> <span class="s1">&#39;STABILITY&#39;</span><span class="p">,</span> <span class="s1">&#39;START&#39;</span><span class="p">,</span> <span class="s1">&#39;STARTING&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;STARTS&#39;</span><span class="p">,</span> <span class="s1">&#39;STATISTICS&#39;</span><span class="p">,</span> <span class="s1">&#39;STDDEV_POP&#39;</span><span class="p">,</span> <span class="s1">&#39;STDDEV_SAMP&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SUB_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;SUM&#39;</span><span class="p">,</span> <span class="s1">&#39;SUSPEND&#39;</span><span class="p">,</span> <span class="s1">&#39;TABLE&#39;</span><span class="p">,</span> <span class="s1">&#39;TAN&#39;</span><span class="p">,</span> <span class="s1">&#39;TANH&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;THEN&#39;</span><span class="p">,</span> <span class="s1">&#39;TIME&#39;</span><span class="p">,</span> <span class="s1">&#39;TIMESTAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;TO&#39;</span><span class="p">,</span> <span class="s1">&#39;TRAILING&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;TRANSACTION&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIGGER&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIM&#39;</span><span class="p">,</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;TRUNC&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;TRUSTED&#39;</span><span class="p">,</span> <span class="s1">&#39;UNCOMMITTED&#39;</span><span class="p">,</span> <span class="s1">&#39;UNION&#39;</span><span class="p">,</span> <span class="s1">&#39;UNIQUE&#39;</span><span class="p">,</span> <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;UPDATE&#39;</span><span class="p">,</span> <span class="s1">&#39;UPPER&#39;</span><span class="p">,</span> <span class="s1">&#39;USER&#39;</span><span class="p">,</span> <span class="s1">&#39;USING&#39;</span><span class="p">,</span> <span class="s1">&#39;UUID_TO_CHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;VALUES&#39;</span><span class="p">,</span> <span class="s1">&#39;VAR_POP&#39;</span><span class="p">,</span> <span class="s1">&#39;VAR_SAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;VARIABLE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;VARYING&#39;</span><span class="p">,</span> <span class="s1">&#39;VIEW&#39;</span><span class="p">,</span> <span class="s1">&#39;WAIT&#39;</span><span class="p">,</span> <span class="s1">&#39;WEEK&#39;</span><span class="p">,</span> <span class="s1">&#39;WHEN&#39;</span><span class="p">,</span> <span class="s1">&#39;WHERE&#39;</span><span class="p">,</span> <span class="s1">&#39;WHILE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;WITH&#39;</span><span class="p">,</span> <span class="s1">&#39;WORK&#39;</span><span class="p">,</span> <span class="s1">&#39;WRITE&#39;</span><span class="p">,</span> <span class="s1">&#39;YEAR&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ods</span> <span class="o">==</span> <span class="mf">13.0</span><span class="p">:</span> <span class="c1"># Firebird 4</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ADD&#39;</span><span class="p">,</span> <span class="s1">&#39;ADMIN&#39;</span><span class="p">,</span> <span class="s1">&#39;ALL&#39;</span><span class="p">,</span> <span class="s1">&#39;ALTER&#39;</span><span class="p">,</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="s1">&#39;ANY&#39;</span><span class="p">,</span> <span class="s1">&#39;AS&#39;</span><span class="p">,</span> <span class="s1">&#39;AT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;AVG&#39;</span><span class="p">,</span> <span class="s1">&#39;BEGIN&#39;</span><span class="p">,</span> <span class="s1">&#39;BETWEEN&#39;</span><span class="p">,</span> <span class="s1">&#39;BIGINT&#39;</span><span class="p">,</span> <span class="s1">&#39;BINARY&#39;</span><span class="p">,</span> <span class="s1">&#39;BIT_LENGTH&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;BLOB&#39;</span><span class="p">,</span> <span class="s1">&#39;BOOLEAN&#39;</span><span class="p">,</span> <span class="s1">&#39;BOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;BY&#39;</span><span class="p">,</span> <span class="s1">&#39;CASE&#39;</span><span class="p">,</span> <span class="s1">&#39;CAST&#39;</span><span class="p">,</span> <span class="s1">&#39;CHAR&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CHAR_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;CHARACTER&#39;</span><span class="p">,</span> <span class="s1">&#39;CHARACTER_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;CHECK&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CLOSE&#39;</span><span class="p">,</span> <span class="s1">&#39;COLLATE&#39;</span><span class="p">,</span> <span class="s1">&#39;COLUMN&#39;</span><span class="p">,</span> <span class="s1">&#39;COMMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;COMMIT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CONNECT&#39;</span><span class="p">,</span> <span class="s1">&#39;CONSTRAINT&#39;</span><span class="p">,</span> <span class="s1">&#39;CORR&#39;</span><span class="p">,</span> <span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;COVAR_POP&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;COVAR_SAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;CREATE&#39;</span><span class="p">,</span> <span class="s1">&#39;CROSS&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CURRENT_CONNECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_DATE&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_ROLE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CURRENT_TIME&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_TIMESTAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;CURRENT_TRANSACTION&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;CURRENT_USER&#39;</span><span class="p">,</span> <span class="s1">&#39;CURSOR&#39;</span><span class="p">,</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="s1">&#39;DAY&#39;</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">,</span> <span class="s1">&#39;DECFLOAT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;DECIMAL&#39;</span><span class="p">,</span> <span class="s1">&#39;DECLARE&#39;</span><span class="p">,</span> <span class="s1">&#39;DEFAULT&#39;</span><span class="p">,</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">,</span> <span class="s1">&#39;DELETING&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;DETERMINISTIC&#39;</span><span class="p">,</span> <span class="s1">&#39;DISCONNECT&#39;</span><span class="p">,</span> <span class="s1">&#39;DISTINCT&#39;</span><span class="p">,</span> <span class="s1">&#39;DOUBLE&#39;</span><span class="p">,</span> <span class="s1">&#39;DROP&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ELSE&#39;</span><span class="p">,</span> <span class="s1">&#39;END&#39;</span><span class="p">,</span> <span class="s1">&#39;ESCAPE&#39;</span><span class="p">,</span> <span class="s1">&#39;EXECUTE&#39;</span><span class="p">,</span> <span class="s1">&#39;EXISTS&#39;</span><span class="p">,</span> <span class="s1">&#39;EXTERNAL&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;EXTRACT&#39;</span><span class="p">,</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">,</span> <span class="s1">&#39;FETCH&#39;</span><span class="p">,</span> <span class="s1">&#39;FILTER&#39;</span><span class="p">,</span> <span class="s1">&#39;FLOAT&#39;</span><span class="p">,</span> <span class="s1">&#39;FOR&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;FOREIGN&#39;</span><span class="p">,</span> <span class="s1">&#39;FROM&#39;</span><span class="p">,</span> <span class="s1">&#39;FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;FUNCTION&#39;</span><span class="p">,</span> <span class="s1">&#39;GDSCODE&#39;</span><span class="p">,</span> <span class="s1">&#39;GLOBAL&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;GRANT&#39;</span><span class="p">,</span> <span class="s1">&#39;GROUP&#39;</span><span class="p">,</span> <span class="s1">&#39;HAVING&#39;</span><span class="p">,</span> <span class="s1">&#39;HOUR&#39;</span><span class="p">,</span> <span class="s1">&#39;IN&#39;</span><span class="p">,</span> <span class="s1">&#39;INDEX&#39;</span><span class="p">,</span> <span class="s1">&#39;INNER&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;INSENSITIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;INSERT&#39;</span><span class="p">,</span> <span class="s1">&#39;INSERTING&#39;</span><span class="p">,</span> <span class="s1">&#39;INT&#39;</span><span class="p">,</span> <span class="s1">&#39;INT128&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;INTO&#39;</span><span class="p">,</span> <span class="s1">&#39;IS&#39;</span><span class="p">,</span> <span class="s1">&#39;JOIN&#39;</span><span class="p">,</span> <span class="s1">&#39;LEADING&#39;</span><span class="p">,</span> <span class="s1">&#39;LEFT&#39;</span><span class="p">,</span> <span class="s1">&#39;LIKE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;LATERAL&#39;</span><span class="p">,</span> <span class="s1">&#39;LOCAL&#39;</span><span class="p">,</span> <span class="s1">&#39;LOCALTIME&#39;</span><span class="p">,</span> <span class="s1">&#39;LOCALTIMESTAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;LONG&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;LOWER&#39;</span><span class="p">,</span> <span class="s1">&#39;MAX&#39;</span><span class="p">,</span> <span class="s1">&#39;MERGE&#39;</span><span class="p">,</span> <span class="s1">&#39;MIN&#39;</span><span class="p">,</span> <span class="s1">&#39;MINUTE&#39;</span><span class="p">,</span> <span class="s1">&#39;MONTH&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;NATIONAL&#39;</span><span class="p">,</span> <span class="s1">&#39;NATURAL&#39;</span><span class="p">,</span> <span class="s1">&#39;NCHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;NO&#39;</span><span class="p">,</span> <span class="s1">&#39;NOT&#39;</span><span class="p">,</span> <span class="s1">&#39;NULL&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;NUMERIC&#39;</span><span class="p">,</span> <span class="s1">&#39;OCTET_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;OF&#39;</span><span class="p">,</span> <span class="s1">&#39;OFFSET&#39;</span><span class="p">,</span> <span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;ONLY&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;OPEN&#39;</span><span class="p">,</span> <span class="s1">&#39;OR&#39;</span><span class="p">,</span> <span class="s1">&#39;ORDER&#39;</span><span class="p">,</span> <span class="s1">&#39;OUTER&#39;</span><span class="p">,</span> <span class="s1">&#39;OVER&#39;</span><span class="p">,</span> <span class="s1">&#39;PARAMETER&#39;</span><span class="p">,</span> <span class="s1">&#39;PLAN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;POSITION&#39;</span><span class="p">,</span> <span class="s1">&#39;POST_EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;PRECISION&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIMARY&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;PROCEDURE&#39;</span><span class="p">,</span> <span class="s1">&#39;PUBLICATION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DB_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ERROR&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RDB$GET_CONTEXT&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$GET_TRANSACTION_CN&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RDB$RECORD_VERSION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ROLE_IN_USE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SET_CONTEXT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RDB$SYSTEM_PRIVILEGE&#39;</span><span class="p">,</span> <span class="s1">&#39;REAL&#39;</span><span class="p">,</span> <span class="s1">&#39;RECORD_VERSION&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RECREATE&#39;</span><span class="p">,</span> <span class="s1">&#39;RECURSIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;REFERENCES&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_AVGX&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;REGR_AVGY&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_INTERCEPT&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_R2&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;REGR_SLOPE&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_SXX&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_SXY&#39;</span><span class="p">,</span> <span class="s1">&#39;REGR_SYY&#39;</span><span class="p">,</span> <span class="s1">&#39;RELEASE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;RETURN&#39;</span><span class="p">,</span> <span class="s1">&#39;RETURNING_VALUES&#39;</span><span class="p">,</span> <span class="s1">&#39;RETURNS&#39;</span><span class="p">,</span> <span class="s1">&#39;REVOKE&#39;</span><span class="p">,</span> <span class="s1">&#39;RIGHT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ROLLBACK&#39;</span><span class="p">,</span> <span class="s1">&#39;ROW&#39;</span><span class="p">,</span> <span class="s1">&#39;ROW_COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;ROWS&#39;</span><span class="p">,</span> <span class="s1">&#39;SAVEPOINT&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SCHEMA&#39;</span><span class="p">,</span> <span class="s1">&#39;SCROLL&#39;</span><span class="p">,</span> <span class="s1">&#39;SECOND&#39;</span><span class="p">,</span> <span class="s1">&#39;SELECT&#39;</span><span class="p">,</span> <span class="s1">&#39;SENSITIVE&#39;</span><span class="p">,</span> <span class="s1">&#39;SET&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;SIMILAR&#39;</span><span class="p">,</span> <span class="s1">&#39;SMALLINT&#39;</span><span class="p">,</span> <span class="s1">&#39;SOME&#39;</span><span class="p">,</span> <span class="s1">&#39;SQLCODE&#39;</span><span class="p">,</span> <span class="s1">&#39;SQLSTATE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;START&#39;</span><span class="p">,</span> <span class="s1">&#39;STDDEV_POP&#39;</span><span class="p">,</span> <span class="s1">&#39;STDDEV_SAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;SUM&#39;</span><span class="p">,</span> <span class="s1">&#39;TABLE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;THEN&#39;</span><span class="p">,</span> <span class="s1">&#39;TIME&#39;</span><span class="p">,</span> <span class="s1">&#39;TIMESTAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;TIMEZONE_HOUR&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;TIMEZONE_MINUTE&#39;</span><span class="p">,</span> <span class="s1">&#39;TO&#39;</span><span class="p">,</span> <span class="s1">&#39;TRAILING&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIGGER&#39;</span><span class="p">,</span> <span class="s1">&#39;TRIM&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;TRUE&#39;</span><span class="p">,</span> <span class="s1">&#39;UNBOUNDED&#39;</span><span class="p">,</span> <span class="s1">&#39;UNION&#39;</span><span class="p">,</span> <span class="s1">&#39;UNIQUE&#39;</span><span class="p">,</span> <span class="s1">&#39;UNKNOWN&#39;</span><span class="p">,</span> <span class="s1">&#39;UPDATE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;UPDATING&#39;</span><span class="p">,</span> <span class="s1">&#39;UPPER&#39;</span><span class="p">,</span> <span class="s1">&#39;USER&#39;</span><span class="p">,</span> <span class="s1">&#39;USING&#39;</span><span class="p">,</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span> <span class="s1">&#39;VALUES&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;VAR_POP&#39;</span><span class="p">,</span> <span class="s1">&#39;VAR_SAMP&#39;</span><span class="p">,</span> <span class="s1">&#39;VARBINARY&#39;</span><span class="p">,</span> <span class="s1">&#39;VARCHAR&#39;</span><span class="p">,</span> <span class="s1">&#39;VARIABLE&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;VARYING&#39;</span><span class="p">,</span> <span class="s1">&#39;VIEW&#39;</span><span class="p">,</span> <span class="s1">&#39;WHEN&#39;</span><span class="p">,</span> <span class="s1">&#39;WHERE&#39;</span><span class="p">,</span> <span class="s1">&#39;WHILE&#39;</span><span class="p">,</span> <span class="s1">&#39;WINDOW&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;WITH&#39;</span><span class="p">,</span> <span class="s1">&#39;WITHOUT&#39;</span><span class="p">,</span> <span class="s1">&#39;YEAR&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ods</span> <span class="o">==</span> <span class="mf">13.1</span><span class="p">:</span> <span class="c1"># Firebird 5.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT RDB$KEYWORD_NAME FROM RDB$KEYWORDS WHERE RDB$KEYWORD_RESERVED&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported ODS version: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ods</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_row</span><span class="p">(</span><span class="s1">&#39;select * from RDB$DATABASE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_charset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;select RDB$OWNER_NAME from RDB$RELATIONS where RDB$RELATION_NAME = &#39;RDB$DATABASE&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__owner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1"># Load enumerate types defined in RDB$TYPES table</span>
        <span class="k">def</span> <span class="nf">enum_dict</span><span class="p">(</span><span class="n">enum_type</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span>
                    <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select RDB$TYPE, RDB$TYPE_NAME from RDB$TYPES &#39;</span>
                                        <span class="s1">&#39;where RDB$FIELD_NAME = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">enum_type</span><span class="p">,))}</span>
        <span class="c1"># Object types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$OBJECT_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Object type codes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_type_codes</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_types</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="c1"># Character set names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">character_set_names</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$CHARACTER_SET_NAME&#39;</span><span class="p">)</span>
        <span class="c1"># Field types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Field sub types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_subtypes</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_SUB_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Function types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Mechanism Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mechanism_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$MECHANISM&#39;</span><span class="p">)</span>
        <span class="c1"># Parameter Mechanism Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter_mechanism_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$PARAMETER_MECHANISM&#39;</span><span class="p">)</span>
        <span class="c1"># Procedure Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">procedure_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$PROCEDURE_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Relation Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># System Flag Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_flag_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">)</span>
        <span class="c1"># Transaction State Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transaction_state_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$TRANSACTION_STATE&#39;</span><span class="p">)</span>
        <span class="c1"># Trigger Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trigger_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Firebird 3.0</span>
        <span class="c1"># Parameter Types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$PARAMETER_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Index activity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index_activity_flags</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$INDEX_INACTIVE&#39;</span><span class="p">)</span>
        <span class="c1"># Index uniqueness</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index_unique_flags</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$UNIQUE_FLAG&#39;</span><span class="p">)</span>
        <span class="c1"># Trigger activity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trigger_activity_flags</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$TRIGGER_INACTIVE&#39;</span><span class="p">)</span>
        <span class="c1"># Grant options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grant_options</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$GRANT_OPTION&#39;</span><span class="p">)</span>
        <span class="c1"># Page types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_types</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$PAGE_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Privacy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">privacy_flags</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$PRIVATE_FLAG&#39;</span><span class="p">)</span>
        <span class="c1"># Legacy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legacy_flags</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$LEGACY_FLAG&#39;</span><span class="p">)</span>
        <span class="c1"># Determinism</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deterministic_flags</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$DETERMINISTIC_FLAG&#39;</span><span class="p">)</span>
        <span class="c1"># Identity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identity_type</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$IDENTITY_TYPE&#39;</span><span class="p">)</span>
        <span class="c1"># Map to type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_map_to_type_</span> <span class="o">=</span> <span class="n">enum_dict</span><span class="p">(</span><span class="s1">&#39;RDB$MAP_TO_TYPE&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>
<div class="viewcode-block" id="Schema.close"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Drops link to `~firebird.driver.core.Connection`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            firebird.base.types.Error: When Schema is owned by Connection instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__internal</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s2">&quot;Call to &#39;close&#39; not allowed for embedded Schema.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear</span><span class="p">()</span></div>
<div class="viewcode-block" id="Schema.clear"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Drop all cached metadata objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear</span><span class="p">()</span></div>
<div class="viewcode-block" id="Schema.reload"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.reload">[docs]</a>    <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Category</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Category</span><span class="p">]]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Commits query transaction and drops all or specified categories of cached</span>
<span class="sd">        metadata objects, so they&#39;re reloaded from database on next reference.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            data: `None`, metadata category or list of categories.</span>

<span class="sd">        Raises:</span>
<span class="sd">            firebird.base.types.Error: For undefined metadata category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ic</span><span class="o">.</span><span class="n">transaction</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>
<div class="viewcode-block" id="Schema.get_item"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.get_item">[docs]</a>    <span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">itype</span><span class="p">:</span> <span class="n">ObjectType</span><span class="p">,</span> <span class="n">subname</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SchemaItem</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return database object by type and name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">TABLE</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">VIEW</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_views</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">TRIGGER</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_triggers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">PROCEDURE</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_procedures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_users</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">UserInfo</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">res</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">COLUMN</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">subname</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">subname</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">INDEX</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">CHARACTER_SET</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_sets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">ROLE</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">GENERATOR</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_generators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">UDF</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_functions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">is</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">COLLATION</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">itype</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">PACKAGE_HEADER</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">PACKAGE_BODY</span><span class="p">):</span> <span class="c1"># Package</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="Schema.get_metadata_ddl"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.get_metadata_ddl">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_ddl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">sections</span><span class="o">=</span><span class="n">SCRIPT_DEFAULT_ORDER</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return list of DDL SQL commands for creation of specified categories of database objects.</span>

<span class="sd">        Keyword Args:</span>
<span class="sd">            sections (list): List of section identifiers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List with SQL commands.</span>

<span class="sd">        Sections are created in the order of occurence in list. Uses `SCRIPT_DEFAULT_ORDER`</span>
<span class="sd">        list when sections are not specified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">order_by_dependency</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">get_dependencies</span><span class="p">):</span>
            <span class="n">ordered</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">wlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">wlist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">wlist</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">add</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">get_dependencies</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dep</span><span class="o">.</span><span class="n">depended_on</span><span class="p">,</span> <span class="n">View</span><span class="p">)</span> <span class="ow">and</span> <span class="n">dep</span><span class="o">.</span><span class="n">depended_on</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ordered</span><span class="p">:</span>
                        <span class="n">wlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                        <span class="n">add</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">add</span><span class="p">:</span>
                    <span class="n">ordered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ordered</span>
        <span class="k">def</span> <span class="nf">view_dependencies</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">get_dependencies</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
        <span class="c1">#</span>
        <span class="n">script</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">sections</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">COLLATIONS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">collation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collations</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">collation</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collation</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">CHARACTER_SETS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">charset</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_sets</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">charset</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">charset</span><span class="o">.</span><span class="n">default_collate</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">charset</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;alter&#39;</span><span class="p">,</span>
                                                          <span class="n">collation</span><span class="o">=</span><span class="n">charset</span><span class="o">.</span><span class="n">default_collate</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">UDFS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">udf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">udf</span><span class="o">.</span><span class="n">is_external</span><span class="p">():</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">udf</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;declare&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">GENERATORS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">generator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generators</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">EXCEPTIONS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exceptions</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">DOMAINS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">domains</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">PACKAGE_DEFS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">packages</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">package</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">FUNCTION_DEFS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="k">if</span>
                             <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_external</span><span class="p">()</span> <span class="ow">and</span>
                             <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_packaged</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">no_code</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">PROCEDURE_DEFS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">proc</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">procedures</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_packaged</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">proc</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">no_code</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">TABLES</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">no_pk</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">no_unique</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">PRIMARY_KEYS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_pkey</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">constraint</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">UNIQUE_CONSTRAINTS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">constraints</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_unique</span><span class="p">()):</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">constraint</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">CHECK_CONSTRAINTS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">constraints</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_check</span><span class="p">()):</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">constraint</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">FOREIGN_CONSTRAINTS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">constraints</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">is_fkey</span><span class="p">()):</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">constraint</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">INDICES</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">indices</span>
                                  <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_enforcer</span><span class="p">()):</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">VIEWS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">order_by_dependency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">views</span><span class="p">,</span> <span class="n">view_dependencies</span><span class="p">):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">PACKAGE_BODIES</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">packages</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">package</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">PROCEDURE_BODIES</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">proc</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">procedures</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_packaged</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ALTER&#39;</span> <span class="o">+</span> <span class="n">proc</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">)[</span><span class="mi">6</span><span class="p">:])</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">FUNCTION_BODIES</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="k">if</span>
                             <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_external</span><span class="p">()</span> <span class="ow">and</span>
                             <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_packaged</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ALTER&#39;</span> <span class="o">+</span> <span class="n">func</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">)[</span><span class="mi">6</span><span class="p">:])</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">TRIGGERS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trigger</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triggers</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trigger</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">ROLES</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">roles</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">role</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">GRANTS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">priv</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">privileges</span>
                             <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">user_name</span> <span class="o">!=</span> <span class="s1">&#39;SYSDBA&#39;</span>
                             <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">subject</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()):</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">priv</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;grant&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">COMMENTS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">objects</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">character_sets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">collations</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">exceptions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">domains</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">generators</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">views</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">triggers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">procedures</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">roles</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">))</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">Table</span><span class="p">,</span> <span class="n">View</span><span class="p">)):</span>
                            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">):</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">Table</span><span class="p">,</span> <span class="n">View</span><span class="p">)):</span>
                                <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">input_params</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">par</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">par</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">))</span>
                                <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">output_params</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">par</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">par</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">SHADOWS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">shadow</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shadows</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shadow</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">INDEX_DEACTIVATIONS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;deactivate&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">INDEX_ACTIVATIONS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">SET_GENERATORS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">generator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generators</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">generator</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">TRIGGER_DEACTIVATIONS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trigger</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triggers</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trigger</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">section</span> <span class="o">==</span> <span class="n">Section</span><span class="o">.</span><span class="n">TRIGGER_ACTIVATIONS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trigger</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">triggers</span><span class="p">:</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trigger</span><span class="o">.</span><span class="n">get_sql_for</span><span class="p">(</span><span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown section code </span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">script</span></div>
<div class="viewcode-block" id="Schema.is_keyword"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.is_keyword">[docs]</a>    <span class="k">def</span> <span class="nf">is_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ident</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if `ident` is a Firebird keyword.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ident</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reserved_</span></div>
<div class="viewcode-block" id="Schema.is_multifile"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.is_multifile">[docs]</a>    <span class="k">def</span> <span class="nf">is_multifile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if database has multiple files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="Schema.get_collation_by_id"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.get_collation_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">charset_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">collation_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get `.Collation` by ID.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            charset_id: Character set ID.</span>
<span class="sd">            collation_id: Collation ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `.Collation` with specified ID or `None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">charset_id</span> <span class="ow">and</span> <span class="n">i</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">collation_id</span><span class="p">)</span></div>
<div class="viewcode-block" id="Schema.get_charset_by_id"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.get_charset_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_charset_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">charset_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CharacterSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arguments:</span>
<span class="sd">            charset_id: CharacterSet ID.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `.CharacterSet` with specified ID or `None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_sets</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">charset_id</span><span class="p">)</span></div>
<div class="viewcode-block" id="Schema.get_privileges_of"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Schema.get_privileges_of">[docs]</a>    <span class="k">def</span> <span class="nf">get_privileges_of</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UserInfo</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">View</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">,</span> <span class="n">Trigger</span><span class="p">,</span> <span class="n">Role</span><span class="p">],</span>
                          <span class="n">user_type</span><span class="p">:</span> <span class="n">ObjectType</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of all privileges granted to user/database object.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            user: User name or instance of class that represents possible user.</span>

<span class="sd">        Keyword Args:</span>
<span class="sd">            user_type: **Required if** `user` is provided as string name.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: When `user` is string name and `user_type` is not provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">user_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Argument user_type required&quot;</span><span class="p">)</span>
            <span class="n">uname</span> <span class="o">=</span> <span class="n">user</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="p">[</span><span class="n">user_type</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="p">(</span><span class="n">Table</span><span class="p">,</span> <span class="n">View</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">,</span> <span class="n">Trigger</span><span class="p">,</span> <span class="n">Role</span><span class="p">)):</span>
            <span class="n">uname</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">_type_code</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">UserInfo</span><span class="p">):</span>
            <span class="n">uname</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">user_name</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="p">[</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">USER</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">user_name</span> <span class="o">==</span> <span class="n">uname</span><span class="p">)</span>
                                       <span class="ow">and</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">user_type</span> <span class="ow">in</span> <span class="n">utype</span><span class="p">),</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;True if schema is not bound to database connection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_con</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Database description or None if it doesn&#39;t have a description.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs</span><span class="p">[</span><span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Database owner name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__owner</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_character_set</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CharacterSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default `.CharacterSet` for database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_sets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_charset_name</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Can refer to the security class applied as databasewide access control limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Collation</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all collations in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Collation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                          <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$collations&#39;</span><span class="p">)),</span>
                                         <span class="n">Collation</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">character_sets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">CharacterSet</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all character sets in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__character_sets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__character_sets</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">CharacterSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                              <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$character_sets&#39;</span><span class="p">)),</span>
                                             <span class="n">CharacterSet</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__character_sets</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">exceptions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">DatabaseException</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all exceptions in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__exceptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exceptions</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">DatabaseException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                          <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$exceptions&#39;</span><span class="p">)),</span>
                                         <span class="n">DatabaseException</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__exceptions</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">generators</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Sequence</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user generators in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_generators</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_generators</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Sequence</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system generators in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_generators</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_generators</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Sequence</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) generators in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_generators</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span>  <span class="n">DataList</span><span class="p">[</span><span class="n">Domain</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user domains in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_domains</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span>  <span class="n">DataList</span><span class="p">[</span><span class="n">Domain</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system domains in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_domains</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span>  <span class="n">DataList</span><span class="p">[</span><span class="n">Domain</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) domains in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_domains</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">indices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user indices in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_indices</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system indices in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_indices</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) indices in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_indices</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Table</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user tables in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_tables</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Table</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system tables in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_tables</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Table</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) tables in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_tables</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">views</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">View</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user views in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_views</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_views</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">View</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system views in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_views</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_views</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">View</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system (system + user) in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_views</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user triggers in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_triggers</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system triggers in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_triggers</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) triggers in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_triggers</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">procedures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user procedures in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_procedures</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_procedures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system procedures in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_procedures</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_procedures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) procedures in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_procedures</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Constraint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all constraints in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="c1"># Dummy call to _get_all_tables() is necessary as</span>
            <span class="c1"># Constraint.is_sys_object() that is called in Constraint.__init__()</span>
            <span class="c1"># will drop result from internal cursor and we&#39;ll not load all constraints.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_tables</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;select c.RDB$CONSTRAINT_NAME,</span>
<span class="s2">c.RDB$CONSTRAINT_TYPE, c.RDB$RELATION_NAME, c.RDB$DEFERRABLE,</span>
<span class="s2">c.RDB$INITIALLY_DEFERRED, c.RDB$INDEX_NAME, r.RDB$CONST_NAME_UQ,</span>
<span class="s2">r.RDB$MATCH_OPTION,r.RDB$UPDATE_RULE,r.RDB$DELETE_RULE,</span>
<span class="s2">k.RDB$TRIGGER_NAME from rdb$relation_constraints C</span>
<span class="s2">left outer join rdb$ref_constraints R on C.rdb$constraint_name = R.rdb$constraint_name</span>
<span class="s2">left outer join rdb$check_constraints K on (C.rdb$constraint_name = K.rdb$constraint_name)</span>
<span class="s2">and (c.RDB$CONSTRAINT_TYPE in (&#39;CHECK&#39;,&#39;NOT NULL&#39;))&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                           <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">Constraint</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="c1"># Check constrains need special care because they&#39;re doubled</span>
            <span class="c1"># (select above returns two records for them with different trigger names)</span>
            <span class="n">checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">is_check</span><span class="p">())</span>
            <span class="n">dchecks</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">check</span> <span class="ow">in</span> <span class="n">checks</span><span class="p">:</span>
                <span class="n">dchecks</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">check</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">checklist</span> <span class="ow">in</span> <span class="n">dchecks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">checklist</span><span class="p">]</span>
                <span class="n">check</span> <span class="o">=</span> <span class="n">checklist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">check</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">names</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraints</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">roles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Role</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all roles in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roles</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                     <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$roles&#39;</span><span class="p">)),</span>
                                    <span class="n">Role</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roles</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roles</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all dependencies in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dependencies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__dependencies</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Dependency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                            <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s1">&#39;select * from rdb$dependencies&#39;</span><span class="p">)),</span>
                                           <span class="n">Dependency</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dependencies</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">functions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user functions defined in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_functions</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sys_functions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all system functions defined in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_functions</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_functions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all (system + user) functions defined in database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_functions</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">DatabaseFile</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all extension files defined for database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;select RDB$FILE_NAME, RDB$FILE_SEQUENCE,</span>
<span class="s2">RDB$FILE_START, RDB$FILE_LENGTH from RDB$FILES</span>
<span class="s2">where RDB$SHADOW_NUMBER = 0</span>
<span class="s2">order by RDB$FILE_SEQUENCE&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__files</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">DatabaseFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                     <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">DatabaseFile</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__files</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__files</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shadows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Shadow</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all shadows defined for database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shadows</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;select RDB$FILE_FLAGS, RDB$SHADOW_NUMBER</span>
<span class="s2">from RDB$FILES</span>
<span class="s2">where RDB$SHADOW_NUMBER &gt; 0 AND RDB$FILE_SEQUENCE = 0</span>
<span class="s2">order by RDB$SHADOW_NUMBER&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__shadows</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Shadow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                       <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">Shadow</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__shadows</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__shadows</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all privileges defined for database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__privileges</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;select RDB$USER, RDB$GRANTOR, RDB$PRIVILEGE,</span>
<span class="s2">RDB$GRANT_OPTION, RDB$RELATION_NAME, RDB$FIELD_NAME, RDB$USER_TYPE, RDB$OBJECT_TYPE</span>
<span class="s2">FROM RDB$USER_PRIVILEGES&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__privileges</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Privilege</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                          <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">Privilege</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__privileges</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">backup_history</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">BackupHistory</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all nbackup hisotry records.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__backup_history</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT RDB$BACKUP_ID, RDB$TIMESTAMP,</span>
<span class="s2">RDB$BACKUP_LEVEL, RDB$GUID, RDB$SCN, RDB$FILE_NAME</span>
<span class="s2">FROM RDB$BACKUP_HISTORY&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__backup_history</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">BackupHistory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                              <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">BackupHistory</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__backup_history</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__backup_history</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Filter</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all user-defined BLOB filters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__filters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT RDB$FUNCTION_NAME, RDB$DESCRIPTION,</span>
<span class="s2">RDB$MODULE_NAME, RDB$ENTRYPOINT, RDB$INPUT_SUB_TYPE, RDB$OUTPUT_SUB_TYPE, RDB$SYSTEM_FLAG</span>
<span class="s2">FROM RDB$FILTERS&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__filters</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                       <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">Filter</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__filters</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__filters</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Package</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of all packages defined for database.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__packages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fail_if_closed</span><span class="p">()</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;select RDB$PACKAGE_NAME, RDB$PACKAGE_HEADER_SOURCE,</span>
<span class="s2">RDB$PACKAGE_BODY_SOURCE, RDB$VALID_BODY_FLAG, RDB$SECURITY_CLASS, RDB$OWNER_NAME,</span>
<span class="s2">RDB$SYSTEM_FLAG, RDB$DESCRIPTION</span>
<span class="s2">            FROM RDB$PACKAGES&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__packages</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">Package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                        <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">)),</span> <span class="n">Package</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__packages</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__packages</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">linger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Database linger value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs</span><span class="p">[</span><span class="s1">&#39;RDB$LINGER&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="SchemaItem"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SchemaItem">[docs]</a><span class="k">class</span> <span class="nc">SchemaItem</span><span class="p">(</span><span class="n">Visitable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all database schema objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="c1">#: Weak reference to parent `.Schema` instance.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span> <span class="o">=</span> <span class="n">schema</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ProxyType</span><span class="p">)</span> <span class="k">else</span> <span class="n">weakref</span><span class="o">.</span><span class="n">proxy</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ObjectType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="nf">_strip_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_check_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">param_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported parameter(s) &#39;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">n</span><span class="p">))</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_needs_quoting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ident</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ident</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">opt_always_quote</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">ident</span> <span class="ow">and</span> <span class="n">ident</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">ident</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">char</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$_&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">is_keyword</span><span class="p">(</span><span class="n">ident</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_quoted_ident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ident</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">ident</span><span class="si">}</span><span class="s1">&quot;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_quoting</span><span class="p">(</span><span class="n">ident</span><span class="p">)</span> <span class="k">else</span> <span class="n">ident</span>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
    <span class="k">def</span> <span class="nf">_get_recreate_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;RE&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_create_sql</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_create_or_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;CREATE OR ALTER&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_create_sql</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)[</span><span class="mi">6</span><span class="p">:]</span>
<div class="viewcode-block" id="SchemaItem.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SchemaItem.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this database object is system object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="SchemaItem.get_quoted_name"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SchemaItem.get_quoted_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_quoted_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns quoted (if necessary) name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_quoted_ident</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>
<div class="viewcode-block" id="SchemaItem.get_dependents"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SchemaItem.get_dependents">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns list of all database objects that depend on this one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">depended_on_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span>
                                                  <span class="n">d</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="SchemaItem.get_dependencies"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SchemaItem.get_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns list of all database objects that this object depend on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">dependent_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span>
                                                  <span class="n">d</span><span class="o">.</span><span class="n">dependent_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="SchemaItem.get_sql_for"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.SchemaItem.get_sql_for">[docs]</a>    <span class="k">def</span> <span class="nf">get_sql_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns SQL command for specified action on metadata object.</span>

<span class="sd">        Supported actions are defined by `.actions` list.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: For unsupported action or wrong parameters passed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_action</span> <span class="o">:=</span> <span class="n">action</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;_get_</span><span class="si">{</span><span class="n">_action</span><span class="si">}</span><span class="s1">_sql&#39;</span><span class="p">)(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported action &#39;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Database object name or None if object doesn&#39;t have a name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_name</span><span class="p">()</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Database object description or None if object doesn&#39;t have a description.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">actions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of supported SQL operations on metadata object instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span></div>

<div class="viewcode-block" id="Collation"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Collation">[docs]</a><span class="k">class</span> <span class="nc">Collation</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents collation.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User collation: `create`, `drop`, `comment`</span>
<span class="sd">        - System collation: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">COLLATION</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$COLLATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$BASE_COLLATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Collation._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Collation._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP collation.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP COLLATION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Collation._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Collation._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE collation.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_based_on_external</span><span class="p">():</span>
            <span class="n">from_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;FROM EXTERNAL (&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BASE_COLLATION_NAME&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">from_</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;FROM </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_collation</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">spec</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">   &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">specific_attributes</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">specific_attributes</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CREATE COLLATION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;   FOR </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">from_</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="s1">&#39;PAD SPACE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">CollationFlag</span><span class="o">.</span><span class="n">PAD_SPACE</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;NO PAD&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="s1">&#39;CASE INSENSITIVE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">CollationFlag</span><span class="o">.</span><span class="n">CASE_INSENSITIVE</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;CASE SENSITIVE&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="s1">&#39;ACCENT INSENSITIVE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">CollationFlag</span><span class="o">.</span><span class="n">ACCENT_INSENSITIVE</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;ACCENT SENSITIVE&#39;</span><span class="si">}</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">&quot;</span></div>
<div class="viewcode-block" id="Collation._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Collation._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT collation.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON COLLATION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Collation.is_based_on_external"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Collation.is_based_on_external">[docs]</a>    <span class="k">def</span> <span class="nf">is_based_on_external</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if collation is based on external collation definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BASE_COLLATION_NAME&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_collation</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collation ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">character_set</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CharacterSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Character set object associated with collation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_charset_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">base_collation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Base `.Collation` object that&#39;s extended by this one, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BASE_COLLATION_NAME&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">base_name</span><span class="p">)</span> <span class="k">if</span> <span class="n">base_name</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CollationFlag</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collation attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CollationFlag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ATTRIBUTES&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">specific_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collation specific attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SPECIFIC_ATTRIBUTES&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">function_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Not currently used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creator&#39;s user name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CharacterSet"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.CharacterSet">[docs]</a><span class="k">class</span> <span class="nc">CharacterSet</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents character set.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `alter` (collation=Collation instance or collation name), `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">CHARACTER_SET</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$CHARACTER_SET_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_COLLATE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span><span class="p">:</span> <span class="n">DataList</span><span class="o">=</span> <span class="kc">None</span>
<div class="viewcode-block" id="CharacterSet._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.CharacterSet._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER charset.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;collation&#39;</span><span class="p">])</span>
        <span class="n">collation</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;collation&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">collation</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER CHARACTER SET </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> SET DEFAULT COLLATION &#39;</span> \
                   <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">collation</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">collation</span><span class="p">,</span><span class="w"> </span><span class="n">Collation</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">collation</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing required parameter: &#39;collation&#39;.&quot;</span><span class="p">)</span></div>
<div class="viewcode-block" id="CharacterSet._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.CharacterSet._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT charset.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON CHARACTER SET </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="CharacterSet.get_collation_by_id"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.CharacterSet.get_collation_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Collation</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return :class:`Collation` object with specified `id_` that belongs to</span>
<span class="sd">        this character set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">id_</span><span class="p">)</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Character set ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bytes_per_character</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Size of characters in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BYTES_PER_CHARACTER&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_collate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collate object of default collate.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFAULT_COLLATE_NAME&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Collation</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of collations associated with character set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span>
                                                               <span class="n">i</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                                               <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__collations</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creator user name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="DatabaseException"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseException">[docs]</a><span class="k">class</span> <span class="nc">DatabaseException</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents database exception.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User exception: `create`, `recreate`, `alter` (message=string), `create_or_alter`,</span>
<span class="sd">          `drop`, `comment`</span>
<span class="sd">        - System exception: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">EXCEPTION</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$EXCEPTION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;create_or_alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="DatabaseException._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseException._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE exception.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CREATE EXCEPTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>
<div class="viewcode-block" id="DatabaseException._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseException._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER exception.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">message</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ALTER EXCEPTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing required parameter: &#39;message&#39;.&quot;</span><span class="p">)</span></div>
<div class="viewcode-block" id="DatabaseException._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseException._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP exception.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP EXCEPTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="DatabaseException._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseException._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT exception.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON EXCEPTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXCEPTION_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;System-assigned unique exception number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXCEPTION_NUMBER&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom message text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$MESSAGE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creator&#39;s user name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sequence"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Sequence">[docs]</a><span class="k">class</span> <span class="nc">Sequence</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents database generator/sequence.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User sequence: `create` (value=number, increment=number),</span>
<span class="sd">          `alter` (value=number, increment=number), `drop`, `comment`</span>
<span class="sd">        - System sequence: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">GENERATOR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$GENERATOR_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Sequence._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Sequence._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE sequence.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;increment&#39;</span><span class="p">])</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
        <span class="n">inc</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;CREATE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">opt_generator_keyword</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> &#39;</span> \
              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="sa">f</span><span class="s2">&quot;START WITH </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s1"> &#39;</span> \
              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="sa">f</span><span class="s2">&quot;INCREMENT BY </span><span class="si">{</span><span class="n">inc</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>
<div class="viewcode-block" id="Sequence._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Sequence._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER sequence.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;increment&#39;</span><span class="p">])</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
        <span class="n">inc</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;ALTER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">opt_generator_keyword</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> &#39;</span> \
              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="sa">f</span><span class="s2">&quot;RESTART WITH </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s1"> &#39;</span> \
              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="sa">f</span><span class="s2">&quot;INCREMENT BY </span><span class="si">{</span><span class="n">inc</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inc</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">cmd</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>
<div class="viewcode-block" id="Sequence._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Sequence._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP sequence.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">opt_generator_keyword</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Sequence._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Sequence._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT sequence.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">opt_generator_keyword</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$GENERATOR_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Sequence.is_identity"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Sequence.is_identity">[docs]</a>    <span class="k">def</span> <span class="nf">is_identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True for system generators created for IDENTITY columns.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal ID number of the sequence.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$GENERATOR_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Current sequence value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select_row</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;select GEN_ID(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">,0) from RDB$DATABASE&#39;</span><span class="p">)[</span><span class="s1">&#39;GEN_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creator&#39;s user name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inital_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initial sequence value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$INITIAL_VALUE&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sequence increment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$GENERATOR_INCREMENT&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TableColumn"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn">[docs]</a><span class="k">class</span> <span class="nc">TableColumn</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents table column.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User column: `drop`, `comment`,</span>
<span class="sd">          `alter` (name=string, datatype=string_SQLTypeDef, position=number,</span>
<span class="sd">          expression=computed_by_expr, restart=None_or_init_value)</span>
<span class="sd">        - System column: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">DOMAIN</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">COLUMN</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">proxy</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$GENERATOR_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__privileges</span><span class="p">:</span> <span class="n">DataList</span> <span class="o">=</span> <span class="kc">None</span>
<div class="viewcode-block" id="TableColumn._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER table column.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;expression&#39;</span><span class="p">,</span> <span class="s1">&#39;datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">,</span> <span class="s1">&#39;restart&#39;</span><span class="p">])</span>
        <span class="n">new_expr</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expression&#39;</span><span class="p">)</span>
        <span class="n">new_type</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;datatype&#39;</span><span class="p">)</span>
        <span class="n">new_name</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">new_position</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;position&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_expr</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_computed</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Change from persistent column to computed is not allowed.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_computed</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="n">new_type</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">new_expr</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Change from computed column to persistent is not allowed.&quot;</span><span class="p">)</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;ALTER TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> ALTER COLUMN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> TO </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_quoted_ident</span><span class="p">(</span><span class="n">new_name</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">new_position</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> POSITION </span><span class="si">{</span><span class="n">new_position</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">new_type</span> <span class="ow">or</span> <span class="n">new_expr</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">sql</span>
            <span class="k">if</span> <span class="n">new_type</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; TYPE </span><span class="si">{</span><span class="n">new_type</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">new_expr</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; COMPUTED BY </span><span class="si">{</span><span class="n">new_expr</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">if</span> <span class="s1">&#39;restart&#39;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">restart</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;restart&#39;</span><span class="p">)</span>
            <span class="n">sql</span> <span class="o">+=</span> <span class="s1">&#39; RESTART&#39;</span>
            <span class="k">if</span> <span class="n">restart</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">sql</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; WITH </span><span class="si">{</span><span class="n">restart</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">return</span> <span class="n">sql</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Parameter required.&quot;</span><span class="p">)</span></div>
<div class="viewcode-block" id="TableColumn._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP table column.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> DROP </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="TableColumn._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT table column.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON COLUMN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="TableColumn.get_dependents"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.get_dependents">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return list of all database objects that depend on this one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">depended_on_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
<div class="viewcode-block" id="TableColumn.get_dependencies"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.get_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return list of database objects that this object depend on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">dependent_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
<div class="viewcode-block" id="TableColumn.get_computedby"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.get_computedby">[docs]</a>    <span class="k">def</span> <span class="nf">get_computedby</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns extression for column computation or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">expression</span></div>
<div class="viewcode-block" id="TableColumn.is_computed"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.is_computed">[docs]</a>    <span class="k">def</span> <span class="nf">is_computed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column is computed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span></div>
<div class="viewcode-block" id="TableColumn.is_domain_based"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.is_domain_based">[docs]</a>    <span class="k">def</span> <span class="nf">is_domain_based</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column is based on user domain.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()</span></div>
<div class="viewcode-block" id="TableColumn.is_nullable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.is_nullable">[docs]</a>    <span class="k">def</span> <span class="nf">is_nullable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column can accept NULL values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">]</span></div>
<div class="viewcode-block" id="TableColumn.is_writable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.is_writable">[docs]</a>    <span class="k">def</span> <span class="nf">is_writable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column is writable (i.e. it&#39;s not computed etc.).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$UPDATE_FLAG&#39;</span><span class="p">])</span></div>
<div class="viewcode-block" id="TableColumn.is_identity"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.is_identity">[docs]</a>    <span class="k">def</span> <span class="nf">is_identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True for identity type column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$IDENTITY_TYPE&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="TableColumn.has_default"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.TableColumn.has_default">[docs]</a>    <span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column has default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">))</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internam number ID for the column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The `.Table` object this column belongs to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">domain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Domain</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Domain` object this column is based on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Column&#39;s sequence number in row.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_POSITION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default value for column or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DEFAULT &#39;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">8</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Collation` object or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">],</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Comlete SQL datatype definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">datatype</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of privileges granted to column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">subject_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span>
                                                        <span class="n">p</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span>
                                                        <span class="n">p</span><span class="o">.</span><span class="n">subject_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">_type_code</span><span class="p">),</span>
                                                     <span class="n">copy</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">generator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identity `.Sequence`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_generators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$GENERATOR_NAME&#39;</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">identity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identity type, None for normal columns.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$IDENTITY_TYPE&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Index"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index">[docs]</a><span class="k">class</span> <span class="nc">Index</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents database index.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User index: `create`, `activate`, `deactivate`, `recompute`, `drop`, `comment`</span>
<span class="sd">        - System index: `activate`, `recompute`, `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">INDEX_EXPR</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">INDEX</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__segment_names</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__segment_statistics</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$INDEX_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FOREIGN_KEY&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="s1">&#39;recompute&#39;</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;deactivate&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Index._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE index.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CREATE </span><span class="si">{</span><span class="s1">&#39;UNIQUE &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_unique</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">index_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2"> &quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;INDEX </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> ON </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> &quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="sa">f</span><span class="s1">&#39;COMPUTED BY </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="si">}</span><span class="s1">&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_expression</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">)&#39;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span></div>
<div class="viewcode-block" id="Index._get_activate_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index._get_activate_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_activate_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ACTIVATE index.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER INDEX </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> ACTIVE&#39;</span></div>
<div class="viewcode-block" id="Index._get_deactivate_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index._get_deactivate_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_deactivate_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DEACTIVATE index.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER INDEX </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> INACTIVE&#39;</span></div>
<div class="viewcode-block" id="Index._get_recompute_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index._get_recompute_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_recompute_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to recompute index statistics.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;SET STATISTICS INDEX </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Index._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP index.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP INDEX </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Index._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT index.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON INDEX </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$INDEX_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Index.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this database object is system object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">]</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_enforcer</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;RDB$&#39;</span><span class="p">)))</span></div>
<div class="viewcode-block" id="Index.is_expression"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index.is_expression">[docs]</a>    <span class="k">def</span> <span class="nf">is_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if index is expression index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span></div>
<div class="viewcode-block" id="Index.is_unique"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index.is_unique">[docs]</a>    <span class="k">def</span> <span class="nf">is_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if index is UNIQUE.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$UNIQUE_FLAG&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span></div>
<div class="viewcode-block" id="Index.is_inactive"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index.is_inactive">[docs]</a>    <span class="k">def</span> <span class="nf">is_inactive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if index is INACTIVE.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$INDEX_INACTIVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span></div>
<div class="viewcode-block" id="Index.is_enforcer"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Index.is_enforcer">[docs]</a>    <span class="k">def</span> <span class="nf">is_enforcer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if index is used to enforce a constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_get_constraint_indices</span><span class="p">()</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The `.Table` instance the index applies to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal number ID of the index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$INDEX_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">index_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">IndexType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Index type (ASCENDING or DESCENDING).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">IndexType</span><span class="o">.</span><span class="n">DESCENDING</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$INDEX_TYPE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="k">else</span> <span class="n">IndexType</span><span class="o">.</span><span class="n">ASCENDING</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">partner_index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Index</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Associated unique/primary key :class:`Index` instance, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">pname</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FOREIGN_KEY&#39;</span><span class="p">])</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Index expression or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXPRESSION_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Latest selectivity of the index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$STATISTICS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">segment_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of index segment names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__segment_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SEGMENT_COUNT&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__segment_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span>
                                        <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select rdb$field_name</span>
<span class="s2">from rdb$index_segments where rdb$index_name = ? order by rdb$field_position&quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,))]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__segment_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__segment_names</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">segment_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of index segment statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__segment_statistics</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SEGMENT_COUNT&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__segment_statistics</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;RDB$STATISTICS&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span>
                                             <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select RDB$STATISTICS</span>
<span class="s2">from rdb$index_segments where rdb$index_name = ? order by rdb$field_position&quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,))]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__segment_statistics</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__segment_statistics</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">TableColumn</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of index segments (table columns).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DataList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">colname</span><span class="p">)</span> <span class="k">for</span> <span class="n">colname</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Constraint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`Constraint` instance that uses this index or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_get_constraint_indices</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
    <span class="c1"># Firebird 5</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">condition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Index condition or None.</span>

<span class="sd">        .. versionadded:: 1.4.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CONDITION_SOURCE&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="ViewColumn"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ViewColumn">[docs]</a><span class="k">class</span> <span class="nc">ViewColumn</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents view column.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">view</span><span class="p">:</span> <span class="n">View</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">DOMAIN</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">COLUMN</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__view</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">proxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$BASE_FIELD&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;BASE_RELATION&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="ViewColumn._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ViewColumn._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE view column.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON COLUMN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="ViewColumn.get_dependents"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ViewColumn.get_dependents">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return list of all database objects that depend on this one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">depended_on_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
<div class="viewcode-block" id="ViewColumn.get_dependencies"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ViewColumn.get_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Dependency</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return list of database objects that this object depend on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">dependent_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
<div class="viewcode-block" id="ViewColumn.is_nullable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ViewColumn.is_nullable">[docs]</a>    <span class="k">def</span> <span class="nf">is_nullable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column is NULLABLE.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">]</span></div>
<div class="viewcode-block" id="ViewColumn.is_writable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ViewColumn.is_writable">[docs]</a>    <span class="k">def</span> <span class="nf">is_writable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if column is writable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$UPDATE_FLAG&#39;</span><span class="p">])</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">base_field</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">TableColumn</span><span class="p">,</span> <span class="n">ViewColumn</span><span class="p">,</span> <span class="n">ProcedureParameter</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The source column from the base relation. Result could be either `.TableColumn`,</span>
<span class="sd">        `.ViewColumn` or `.ProcedureParameter` instance or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bfield</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BASE_FIELD&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">bfield</span><span class="p">:</span>
            <span class="n">brel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;BASE_RELATION&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">brel</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bfield</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_views</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">brel</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bfield</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_procedures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">brel</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">get_outparam</span><span class="p">(</span><span class="n">bfield</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t locate base relation.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">View</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;View object this column belongs to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__view</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">domain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Domain</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Domain object this column is based on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Column&#39;s sequence number in row.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_POSITION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collation object or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">],</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Complete SQL datatype definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">datatype</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of privileges granted to column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Views are logged as Tables in RDB$USER_PRIVILEGES</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">subject_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span>
                                                         <span class="n">p</span><span class="o">.</span><span class="n">field_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span>
                                                         <span class="n">p</span><span class="o">.</span><span class="n">subject_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Domain"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain">[docs]</a><span class="k">class</span> <span class="nc">Domain</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents SQl Domain.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User domain: `create`, `drop`, `comment`,</span>
<span class="sd">          `alter` (name=string, default=string_definition_or_None,</span>
<span class="sd">          check=string_definition_or_None, datatype=string_SQLTypeDef)</span>
<span class="sd">        - System domain: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">COLUMN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Domain._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE domain.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;CREATE DOMAIN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> AS </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">datatype</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">sql</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; DEFAULT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nullable</span><span class="p">():</span>
            <span class="n">sql</span> <span class="o">+=</span> <span class="s1">&#39; NOT NULL&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_validated</span><span class="p">():</span>
            <span class="n">sql</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">validation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFAULT_COLLATE_NAME&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collation</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="n">sql</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; COLLATE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collation</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">sql</span></div>
<div class="viewcode-block" id="Domain._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER domain.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;check&#39;</span><span class="p">,</span> <span class="s1">&#39;datatype&#39;</span><span class="p">])</span>
        <span class="n">new_name</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">new_default</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">new_constraint</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;check&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">new_type</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;datatype&#39;</span><span class="p">)</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;ALTER DOMAIN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only one parameter allowed.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> TO </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_quoted_ident</span><span class="p">(</span><span class="n">new_name</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">new_default</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> SET DEFAULT </span><span class="si">{</span><span class="n">new_default</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">new_default</span>
                    <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> DROP DEFAULT&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_constraint</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> ADD CHECK (</span><span class="si">{</span><span class="n">new_constraint</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">if</span> <span class="n">new_constraint</span>
                    <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> DROP CONSTRAINT&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_type</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s1"> TYPE </span><span class="si">{</span><span class="n">new_type</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Parameter required.&quot;</span><span class="p">)</span></div>
<div class="viewcode-block" id="Domain._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP domain.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP DOMAIN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Domain._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT dimain.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON DOMAIN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Domain.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if this database object is system object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;RDB$&#39;</span><span class="p">)</span></div>
<div class="viewcode-block" id="Domain.is_nullable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain.is_nullable">[docs]</a>    <span class="k">def</span> <span class="nf">is_nullable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if domain is not defined with NOT NULL.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">]</span></div>
<div class="viewcode-block" id="Domain.is_computed"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain.is_computed">[docs]</a>    <span class="k">def</span> <span class="nf">is_computed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if domain is computed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COMPUTED_SOURCE&#39;</span><span class="p">])</span></div>
<div class="viewcode-block" id="Domain.is_validated"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain.is_validated">[docs]</a>    <span class="k">def</span> <span class="nf">is_validated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if domain has validation constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$VALIDATION_SOURCE&#39;</span><span class="p">])</span></div>
<div class="viewcode-block" id="Domain.is_array"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain.is_array">[docs]</a>    <span class="k">def</span> <span class="nf">is_array</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if domain defines an array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DIMENSIONS&#39;</span><span class="p">])</span></div>
<div class="viewcode-block" id="Domain.has_default"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Domain.has_default">[docs]</a>    <span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if domain has default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">])</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Expression that defines the COMPUTED BY column or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COMPUTED_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">validation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;CHECK constraint for the domain or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$VALIDATION_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Expression that defines the default value or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DEFAULT &#39;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">8</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of the column in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Negative number representing the scale of NUMBER and DECIMAL column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SCALE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Number code of the data type defined for the column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FieldType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_TYPE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sub_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field sub-type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SUB_TYPE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">segment_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For BLOB columns, a suggested length for BLOB buffers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SEGMENT_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of field as it is in an external table. Always 0 for regular tables.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXTERNAL_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scale factor of an integer field as it is in an external table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXTERNAL_SCALE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Data type of the field as it is in an external table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXTERNAL_TYPE&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">FieldType</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of dimension definition pairs if column is an array type. Always empty</span>
<span class="sd">        for non-array columns.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DIMENSIONS&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_get_field_dimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">character_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of CHAR and VARCHAR column, in characters (not bytes).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collation object for a character column or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">],</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">character_set</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CharacterSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;CharacterSet object for a character or text BLOB column, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_charset_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">precision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Indicates the number of digits of precision available to the data type of the column.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_PRECISION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Comlete SQL datatype definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">precision_known</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldType</span><span class="o">.</span><span class="n">SHORT</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">LONG</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">INT64</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldSubType</span><span class="o">.</span><span class="n">NUMERIC</span><span class="p">,</span> <span class="n">FieldSubType</span><span class="o">.</span><span class="n">DECIMAL</span><span class="p">):</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INTEGRAL_SUBTYPES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span><span class="p">]</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
                    <span class="n">precision_known</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">precision_known</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">SHORT</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NUMERIC(4, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">LONG</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NUMERIC(9, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NUMERIC(15, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">COLUMN_TYPES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldType</span><span class="o">.</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">VARYING</span>                        <span class="p">):</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">character_length</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">character_length</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DIMENSIONS&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">l</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s1">&#39;</span>
                                        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">BLOB</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">field_subtypes</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; SUB_TYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">field_subtypes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; SUB_TYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; SEGMENT SIZE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">segment_length</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldType</span><span class="o">.</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">VARYING</span>                        <span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">BLOB</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">default_character_set</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">]):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; CHARACTER SET </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creator&#39;s user name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Dependency"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Dependency">[docs]</a><span class="k">class</span> <span class="nc">Dependency</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Maps dependency between database objects.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `none`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEPENDENT_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEPENDED_ON_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="Dependency.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Dependency.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True as dependency entries are considered as system objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>
<div class="viewcode-block" id="Dependency.get_dependents"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Dependency.get_dependents">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns empty list because Dependency object never has dependents.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DataList</span><span class="p">()</span></div>
<div class="viewcode-block" id="Dependency.get_dependencies"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Dependency.get_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns empty list because Dependency object never has dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DataList</span><span class="p">()</span></div>
<div class="viewcode-block" id="Dependency.is_packaged"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Dependency.is_packaged">[docs]</a>    <span class="k">def</span> <span class="nf">is_packaged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if dependency is defined in package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dependent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SchemaItem</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dependent database object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># TABLE</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># VIEW</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_views</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># TRIGGER</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_triggers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># COMPUTED FIELD (i.e. DOMAIN)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for VALIDATION if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1">#PROCEDURE</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_procedures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span> <span class="c1"># EXPRESSION INDEX</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span> <span class="c1"># EXCEPTION</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for USER if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span> <span class="c1"># FIELD (i.e. DOMAIN)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span> <span class="c1"># INDEX</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for DEPENDENT COUNT if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for USER GROUP if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span> <span class="c1"># ROLE</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span> <span class="c1"># GENERATOR</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_generators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span> <span class="c1"># UDF</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_functions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for BLOB_FILTER</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span> <span class="c1"># Collation</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">collations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dependent_type</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">):</span> <span class="c1"># Package + package body</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dependent_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dependent_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dependent database object name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEPENDENT_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dependent_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dependent database object type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ObjectType</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEPENDENT_TYPE&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of one column in `depended on` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">depended_on</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SchemaItem</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Database object on which dependent depends.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># TABLE</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># VIEW</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_views</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># TRIGGER</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_triggers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># COMPUTED FIELD (i.e. DOMAIN)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for VALIDATION if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1">#PROCEDURE</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_procedures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span> <span class="c1"># EXPRESSION INDEX</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span> <span class="c1"># EXCEPTION</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for USER if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span> <span class="c1"># FIELD (i.e. DOMAIN)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span> <span class="c1"># INDEX</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for DEPENDENT COUNT if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for USER GROUP if necessary</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span> <span class="c1"># ROLE</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span> <span class="c1"># GENERATOR</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_generators</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span> <span class="c1"># UDF</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_functions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depended_on_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">depended_on_type</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>
            <span class="c1">## ToDo: Implement handler for BLOB_FILTER</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">depended_on_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of db object on which dependent depends.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEPENDED_ON_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">depended_on_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Type of db object on which dependent depends.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ObjectType</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEPENDED_ON_TYPE&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Package</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Package` instance if dependent depends on object in package or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Constraint"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint">[docs]</a><span class="k">class</span> <span class="nc">Constraint</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents table or column constraint.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - Constraint on user table except NOT NULL constraint: `create`, `drop`</span>
<span class="sd">        - Constraint on system table: `none`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$CONSTRAINT_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$CONSTRAINT_TYPE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEFERRABLE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$INITIALLY_DEFERRED&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$INDEX_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$CONST_NAME_UQ&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$MATCH_OPTION&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$UPDATE_RULE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DELETE_RULE&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_not_null</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Constraint._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE constraint.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">const_def</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;ALTER TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> ADD &#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;INTEG_&#39;</span><span class="p">):</span>
            <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;CONSTRAINT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">  &#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_check</span><span class="p">():</span>
            <span class="n">const_def</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">triggers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">source</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_pkey</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_unique</span><span class="p">():</span>
            <span class="n">const_def</span> <span class="o">+=</span> <span class="s1">&#39;PRIMARY KEY&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_pkey</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;UNIQUE&#39;</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span>
            <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  USING </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">index_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1"> INDEX </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_fkey</span><span class="p">():</span>
            <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;FOREIGN KEY (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">  &quot;</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partner_constraint</span>
            <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;REFERENCES </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_rule</span> <span class="o">!=</span> <span class="s1">&#39;RESTRICT&#39;</span><span class="p">:</span>
                <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  ON DELETE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_rule</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_rule</span> <span class="o">!=</span> <span class="s1">&#39;RESTRICT&#39;</span><span class="p">:</span>
                <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  ON UPDATE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">update_rule</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                <span class="n">const_def</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  USING </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">index_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1"> INDEX </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unrecognized constraint type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">constraint_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">const_def</span></div>
<div class="viewcode-block" id="Constraint._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP constraint.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> DROP CONSTRAINT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CONSTRAINT_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Constraint.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this database object is system object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()</span></div>
<div class="viewcode-block" id="Constraint.is_not_null"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_not_null">[docs]</a>    <span class="k">def</span> <span class="nf">is_not_null</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s NOT NULL constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraint_type</span> <span class="o">==</span> <span class="n">ConstraintType</span><span class="o">.</span><span class="n">NOT_NULL</span></div>
<div class="viewcode-block" id="Constraint.is_pkey"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_pkey">[docs]</a>    <span class="k">def</span> <span class="nf">is_pkey</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s PRIMARY KEY constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraint_type</span> <span class="o">==</span> <span class="n">ConstraintType</span><span class="o">.</span><span class="n">PRIMARY_KEY</span></div>
<div class="viewcode-block" id="Constraint.is_fkey"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_fkey">[docs]</a>    <span class="k">def</span> <span class="nf">is_fkey</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s FOREIGN KEY constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraint_type</span> <span class="o">==</span> <span class="n">ConstraintType</span><span class="o">.</span><span class="n">FOREIGN_KEY</span></div>
<div class="viewcode-block" id="Constraint.is_unique"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_unique">[docs]</a>    <span class="k">def</span> <span class="nf">is_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s UNIQUE constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraint_type</span> <span class="o">==</span> <span class="n">ConstraintType</span><span class="o">.</span><span class="n">UNIQUE</span></div>
<div class="viewcode-block" id="Constraint.is_check"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_check">[docs]</a>    <span class="k">def</span> <span class="nf">is_check</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s CHECK constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraint_type</span> <span class="o">==</span> <span class="n">ConstraintType</span><span class="o">.</span><span class="n">CHECK</span></div>
<div class="viewcode-block" id="Constraint.is_deferrable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_deferrable">[docs]</a>    <span class="k">def</span> <span class="nf">is_deferrable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s DEFERRABLE constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFERRABLE&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;NO&#39;</span></div>
<div class="viewcode-block" id="Constraint.is_deferred"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Constraint.is_deferred">[docs]</a>    <span class="k">def</span> <span class="nf">is_deferred</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s INITIALLY DEFERRED constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$INITIALLY_DEFERRED&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;NO&#39;</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constraint_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConstraintType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constraint type -&gt; primary key/unique/foreign key/check/not null.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ConstraintType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CONSTRAINT_TYPE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Table` instance this constraint applies to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Index</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Index` instance that enforces the constraint.</span>
<span class="sd">        `None` if constraint is not primary key/unique or foreign key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$INDEX_NAME&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">trigger_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a CHECK constraint contains trigger names that enforce the constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_check</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of triggers that enforce the CHECK constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_triggers</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_names</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">column_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a NOT NULL constraint, this is the name of the column to which</span>
<span class="sd">        the constraint applies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_not_null</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">partner_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Constraint</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a FOREIGN KEY constraint, this is the unique or primary key</span>
<span class="sd">        `.Constraint` referred.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CONST_NAME_UQ&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">match_option</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a FOREIGN KEY constraint only. Current value is FULL in all cases.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$MATCH_OPTION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">update_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a FOREIGN KEY constraint, this is the action applicable to when primary key</span>
<span class="sd">        is updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$UPDATE_RULE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">delete_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a FOREIGN KEY constraint, this is the action applicable to when primary key</span>
<span class="sd">        is deleted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DELETE_RULE&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="Table"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table">[docs]</a><span class="k">class</span> <span class="nc">Table</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents Table in database.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User table: `create` (no_pk=bool, no_unique=bool), `recreate` (no_pk=bool, no_unique=bool),</span>
<span class="sd">          `drop`, `comment`, `insert (update=bool, returning=list[str], matching=list[str])`</span>
<span class="sd">        - System table: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">TABLE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Table._get_insert_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table._get_insert_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_insert_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to INSERT data to table.&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="s1">&#39;returning&#39;</span><span class="p">,</span> <span class="s1">&#39;matching&#39;</span><span class="p">])</span>
            <span class="n">update</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">returning</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;returning&#39;</span><span class="p">)</span>
            <span class="n">matching</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;returning&#39;</span><span class="p">)</span>
            <span class="c1">#</span>
            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;UPDATE OR &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">INSERT TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; VALUES (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">if</span> <span class="n">matching</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; MATCHING (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">matching</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">if</span> <span class="n">returning</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; RETURNING (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">returning</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span></div>
<div class="viewcode-block" id="Table._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE table.&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;no_pk&#39;</span><span class="p">,</span> <span class="s1">&#39;no_unique&#39;</span><span class="p">])</span>
            <span class="n">no_pk</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;no_pk&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">no_unique</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;no_unique&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="c1">#</span>
            <span class="n">tabdef</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CREATE </span><span class="si">{</span><span class="s1">&#39;GLOBAL TEMPORARY &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_gtt</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_external</span><span class="p">():</span>
                <span class="n">tabdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  EXTERNAL FILE &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">external_file</span><span class="si">}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">tabdef</span> <span class="o">+=</span> <span class="s1">&#39; (&#39;</span>
            <span class="n">partdefs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">coldef</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> &#39;</span>
                <span class="n">collate</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">is_domain_based</span><span class="p">():</span>
                    <span class="n">coldef</span> <span class="o">+=</span> <span class="n">col</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">col</span><span class="o">.</span><span class="n">is_computed</span><span class="p">():</span>
                    <span class="n">coldef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;COMPUTED BY </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">get_computedby</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">datatype</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">datatype</span>
                    <span class="k">if</span> <span class="n">datatype</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39; COLLATE &#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">datatype</span><span class="p">,</span> <span class="n">collate</span> <span class="o">=</span> <span class="n">datatype</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; COLLATE &#39;</span><span class="p">)</span>
                    <span class="n">coldef</span> <span class="o">+=</span> <span class="n">datatype</span>
                <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">is_identity</span><span class="p">():</span>
                    <span class="n">coldef</span> <span class="o">+=</span> <span class="s1">&#39; GENERATED BY DEFAULT AS IDENTITY&#39;</span>
                    <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">inital_value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">coldef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; (START WITH </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">inital_value</span><span class="si">}</span><span class="s1">)&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
                        <span class="n">coldef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; DEFAULT </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">default</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">col</span><span class="o">.</span><span class="n">is_nullable</span><span class="p">():</span>
                        <span class="n">coldef</span> <span class="o">+=</span> <span class="s1">&#39; NOT NULL&#39;</span>
                    <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># Sometimes RDB$COLLATION_ID has a garbage value</span>
                        <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">collation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">cname</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">collation</span><span class="o">.</span><span class="n">name</span>
                            <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFAULT_COLLATE_NAME&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">cname</span><span class="p">:</span>
                                <span class="n">collate</span> <span class="o">=</span> <span class="n">cname</span>
                <span class="k">if</span> <span class="n">collate</span><span class="p">:</span>
                    <span class="n">coldef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; COLLATE </span><span class="si">{</span><span class="n">collate</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">partdefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coldef</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_pkey</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">no_pk</span><span class="p">:</span>
                <span class="n">pk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_key</span>
                <span class="n">pkdef</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  &#39;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">pk</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;INTEG_&#39;</span><span class="p">):</span>
                    <span class="n">pkdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;CONSTRAINT </span><span class="si">{</span><span class="n">pk</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">  &#39;</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">pk</span><span class="o">.</span><span class="n">index</span>
                <span class="n">pkdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;PRIMARY KEY (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                    <span class="n">pkdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">    USING </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">index_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1"> INDEX </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">partdefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pkdef</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">no_unique</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">uq</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">uq</span><span class="o">.</span><span class="n">is_unique</span><span class="p">():</span>
                        <span class="n">uqdef</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  &#39;</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">uq</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;INTEG_&#39;</span><span class="p">):</span>
                            <span class="n">uqdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;CONSTRAINT </span><span class="si">{</span><span class="n">uq</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">  &#39;</span>
                        <span class="n">i</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">index</span>
                        <span class="n">uqdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;UNIQUE (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">segment_names</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
                            <span class="n">uqdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">    USING </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">index_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1"> INDEX </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
                        <span class="n">partdefs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uqdef</span><span class="p">)</span>
            <span class="n">tabdef</span> <span class="o">+=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">partdefs</span><span class="p">)</span>
            <span class="n">tabdef</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">)&#39;</span>
            <span class="k">return</span> <span class="n">tabdef</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span></div>
<div class="viewcode-block" id="Table._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP table.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Table._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT table.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON TABLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Table.is_gtt"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table.is_gtt">[docs]</a>    <span class="k">def</span> <span class="nf">is_gtt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if table is GLOBAL TEMPORARY table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">RelationType</span><span class="o">.</span><span class="n">GLOBAL_TEMPORARY_DELETE</span><span class="p">,</span>
                                   <span class="n">RelationType</span><span class="o">.</span><span class="n">GLOBAL_TEMPORARY_PRESERVE</span><span class="p">)</span></div>
<div class="viewcode-block" id="Table.is_persistent"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table.is_persistent">[docs]</a>    <span class="k">def</span> <span class="nf">is_persistent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if table is persistent one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">RelationType</span><span class="o">.</span><span class="n">PERSISTENT</span><span class="p">,</span> <span class="n">RelationType</span><span class="o">.</span><span class="n">EXTERNAL</span><span class="p">)</span></div>
<div class="viewcode-block" id="Table.is_external"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table.is_external">[docs]</a>    <span class="k">def</span> <span class="nf">is_external</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if table is external table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">external_file</span><span class="p">)</span></div>
<div class="viewcode-block" id="Table.has_pkey"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table.has_pkey">[docs]</a>    <span class="k">def</span> <span class="nf">has_pkey</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if table has PRIMARY KEY defined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">const</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">is_pkey</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Table.has_fkey"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Table.has_fkey">[docs]</a>    <span class="k">def</span> <span class="nf">has_fkey</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if table has any FOREIGN KEY constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">const</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">is_fkey</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal number ID for the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dbkey_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of the RDB$DB_KEY column in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DBKEY_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal format ID for the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FORMAT&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">table_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RelationType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Table type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RelationType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_TYPE&#39;</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class that define access limits to the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Full path to the external data file, if any.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$EXTERNAL_FILE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User name of table&#39;s creator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default security class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFAULT_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal flags.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FLAGS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Constraint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PRIMARY KEY constraint for this table or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">is_pkey</span><span class="p">())</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">foreign_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Constraint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of FOREIGN KEY constraints for this table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">is_fkey</span><span class="p">(),</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">TableColumn</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of columns defined for table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$FIELD_POSITION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$UPDATE_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_ID&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;RDB$GENERATOR_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$IDENTITY_TYPE&#39;</span><span class="p">]</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from RDB$RELATION_FIELDS &quot;</span> \
                  <span class="sa">f</span><span class="s2">&quot;where RDB$RELATION_NAME = ? order by RDB$FIELD_POSITION&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">TableColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                       <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,))),</span>
                                      <span class="n">TableColumn</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Constraint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of constraints defined for table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                               <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">indices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Index</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of indices defined for table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_indices</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                               <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of triggers defined for table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">triggers</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                            <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of privileges to table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">subject_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span>
                                                         <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">subject_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="p">)),</span>
                                                     <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="View"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.View">[docs]</a><span class="k">class</span> <span class="nc">View</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents database View.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User views: `create`, `recreate`, `alter` (columns=string_or_list, query=string,check=bool),</span>
<span class="sd">          `create_or_alter`, `drop`, `comment`</span>
<span class="sd">        - System views: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">VIEW</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$VIEW_SOURCE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;create_or_alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="View._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.View._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE view.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CREATE VIEW </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">col</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;   AS</span><span class="se">\n</span><span class="s2">     </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sql</span><span class="si">}</span><span class="s2">&quot;</span></div>
<div class="viewcode-block" id="View._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.View._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER view.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="s1">&#39;query&#39;</span><span class="p">,</span> <span class="s1">&#39;check&#39;</span><span class="p">])</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;query&#39;</span><span class="p">)</span>
        <span class="n">check</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;check&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">query</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s1">)&#39;</span> <span class="k">if</span> <span class="n">columns</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">check</span><span class="p">:</span>
                <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="se">\n</span><span class="s1">     WITH CHECK OPTION&#39;</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ALTER VIEW </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="se">\n</span><span class="s2">   AS</span><span class="se">\n</span><span class="s2">     </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing required parameter: &#39;query&#39;.&quot;</span><span class="p">)</span></div>
<div class="viewcode-block" id="View._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.View._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP view.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP VIEW </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="View._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.View._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT view.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON VIEW </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="View.has_checkoption"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.View.has_checkoption">[docs]</a>    <span class="k">def</span> <span class="nf">has_checkoption</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if View has WITH CHECK OPTION defined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;WITH CHECK OPTION&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal number ID for the view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sql</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The query specification.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$VIEW_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dbkey_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of the RDB$DB_KEY column in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DBKEY_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal format ID for the view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FORMAT&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class that define access limits to the view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User name of view&#39;s creator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default security class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$DEFAULT_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal flags.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FLAGS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">ViewColumn</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of columns defined for view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">ViewColumn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                                       <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select r.RDB$FIELD_NAME,</span>
<span class="s2">r.RDB$RELATION_NAME, r.RDB$FIELD_SOURCE, r.RDB$FIELD_POSITION, r.RDB$UPDATE_FLAG,</span>
<span class="s2">r.RDB$FIELD_ID, r.RDB$DESCRIPTION, r.RDB$SYSTEM_FLAG, r.RDB$SECURITY_CLASS, r.RDB$NULL_FLAG,</span>
<span class="s2">r.RDB$DEFAULT_SOURCE, r.RDB$COLLATION_ID, r.RDB$BASE_FIELD, v.RDB$RELATION_NAME as BASE_RELATION</span>
<span class="s2">    from RDB$RELATION_FIELDS r</span>
<span class="s2">    left join RDB$VIEW_RELATIONS v on r.RDB$VIEW_CONTEXT = v.RDB$VIEW_CONTEXT and v.rdb$view_name = ?</span>
<span class="s2">    where r.RDB$RELATION_NAME = ?</span>
<span class="s2">    order by RDB$FIELD_POSITION&quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))),</span> <span class="n">ViewColumn</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__columns</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Trigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of triggers defined for view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">triggers</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span>
                                            <span class="n">t</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                            <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of privileges granted to view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Views are logged as Tables in RDB$USER_PRIVILEGES</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">subject_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span>
                                                         <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">subject_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)),</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Trigger"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger">[docs]</a><span class="k">class</span> <span class="nc">Trigger</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents trigger.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User trigger: `create` (inactive=bool), `recreate`, `create_or_alter`, `drop`, `comment`,</span>
<span class="sd">          `alter` (fire_on=string, active=bool,sequence=int, declare=string_or_list, code=string_or_list)</span>
<span class="sd">        - System trigger: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">TRIGGER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;create_or_alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__m</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">DMLTrigger</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<div class="viewcode-block" id="Trigger._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE trigger.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;inactive&#39;</span><span class="p">])</span>
        <span class="n">inactive</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inactive&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;CREATE TRIGGER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; FOR </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="s1">&#39;ACTIVE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">inactive</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;INACTIVE&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
                  <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_type_as_string</span><span class="p">()</span><span class="si">}</span><span class="s2"> POSITION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sequence</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> \
                  <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="Trigger._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER trigger.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;fire_on&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="s1">&#39;declare&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">])</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fire_on&#39;</span><span class="p">)</span>
        <span class="n">active</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
        <span class="n">sequence</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sequence&#39;</span><span class="p">)</span>
        <span class="n">declare</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;declare&#39;</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">active</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39; ACTIVE&#39;</span> <span class="k">if</span> <span class="n">active</span> <span class="k">else</span> <span class="s1">&#39; INACTIVE&#39;</span>
        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dbaction</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;ON &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">dbaction</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_db_trigger</span><span class="p">())</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="n">dbaction</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_db_trigger</span><span class="p">()):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Trigger type change is not allowed.&quot;</span><span class="p">)</span>
            <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  </span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">sequence</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  POSITION </span><span class="si">{</span><span class="n">sequence</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">declare</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">declare</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">declare</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">declare</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">code</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">body</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">AS</span><span class="se">\n</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s1">BEGIN</span><span class="se">\n</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s1">END&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">header</span> <span class="ow">or</span> <span class="n">body</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Header or body definition required.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER TRIGGER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}{</span><span class="n">header</span><span class="si">}{</span><span class="n">body</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Trigger._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP trigger.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP TRIGGER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Trigger._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT trigger.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON TRIGGER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_NAME&#39;</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">__ru</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">IntEnum</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_action_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DMLTrigger</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">slot</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__m</span><span class="p">[</span><span class="n">code</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>
<div class="viewcode-block" id="Trigger.is_before"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_before">[docs]</a>    <span class="k">def</span> <span class="nf">is_before</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is set for BEFORE action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="ow">is</span> <span class="n">TriggerTime</span><span class="o">.</span><span class="n">BEFORE</span></div>
<div class="viewcode-block" id="Trigger.is_after"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_after">[docs]</a>    <span class="k">def</span> <span class="nf">is_after</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is set for AFTER action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="ow">is</span> <span class="n">TriggerTime</span><span class="o">.</span><span class="n">AFTER</span></div>
<div class="viewcode-block" id="Trigger.is_db_trigger"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_db_trigger">[docs]</a>    <span class="k">def</span> <span class="nf">is_db_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is database trigger.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="ow">is</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DB</span></div>
<div class="viewcode-block" id="Trigger.is_ddl_trigger"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_ddl_trigger">[docs]</a>    <span class="k">def</span> <span class="nf">is_ddl_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is DDL trigger.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="ow">is</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DDL</span></div>
<div class="viewcode-block" id="Trigger.is_insert"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_insert">[docs]</a>    <span class="k">def</span> <span class="nf">is_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is set for INSERT operation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DMLTrigger</span><span class="o">.</span><span class="n">INSERT</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="ow">is</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DML</span> <span class="k">else</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Trigger.is_update"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_update">[docs]</a>    <span class="k">def</span> <span class="nf">is_update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is set for UPDATE operation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DMLTrigger</span><span class="o">.</span><span class="n">UPDATE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="ow">is</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DML</span> <span class="k">else</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Trigger.is_delete"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.is_delete">[docs]</a>    <span class="k">def</span> <span class="nf">is_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this trigger is set for DELETE operation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DMLTrigger</span><span class="o">.</span><span class="n">DELETE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="ow">is</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DML</span> <span class="k">else</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Trigger.get_type_as_string"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Trigger.get_type_as_string">[docs]</a>    <span class="k">def</span> <span class="nf">get_type_as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return string with action and operation specification.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_ddl_trigger</span><span class="p">():</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ANY DDL STATEMENT&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">DDLTrigger</span><span class="o">.</span><span class="n">ANY</span>
                     <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ru</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_db_trigger</span><span class="p">():</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ON &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ru</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_action_type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_action_type</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;OR&#39;</span><span class="p">)</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_action_type</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;OR&#39;</span><span class="p">)</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">relation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">View</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Table` or `.View` that the trigger is for, or None for database triggers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">relname</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rel</span><span class="p">:</span>
            <span class="n">rel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_views</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">relname</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rel</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sequence (position) of trigger. Zero usually means no sequence defined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_SEQUENCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">trigger_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trigger type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TriggerType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x3</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DMLTrigger</span><span class="p">,</span> <span class="n">DBTrigger</span><span class="p">,</span> <span class="n">DDLTrigger</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trigger action type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="o">==</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DDL</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DDLTrigger</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">]</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">TriggerType</span><span class="o">.</span><span class="n">DDL</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_type</span> <span class="o">==</span> <span class="n">TriggerType</span><span class="o">.</span><span class="n">DB</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DBTrigger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">]</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">TriggerType</span><span class="o">.</span><span class="n">DB</span><span class="p">)</span>
        <span class="c1"># DML</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">DMLTrigger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_action_type</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">|=</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TriggerTime</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trigger time (BEFORE/AFTER event).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TriggerTime</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_TYPE&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_ddl_trigger</span><span class="p">()</span> <span class="k">else</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PSQL source code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal flags.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FLAGS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">valid_blr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trigger BLR invalidation flag. Coul be True/False or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$VALID_BLR&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">engine_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Engine name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Entrypoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">active</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;True if this trigger is active.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TRIGGER_INACTIVE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="ProcedureParameter"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter">[docs]</a><span class="k">class</span> <span class="nc">ProcedureParameter</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents procedure parameter.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">proc</span><span class="p">:</span> <span class="n">Procedure</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__proc</span><span class="p">:</span> <span class="n">Procedure</span> <span class="o">=</span> <span class="n">proc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PARAMETER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PROCEDURE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="ProcedureParameter._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT procedure parameter.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON PARAMETER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">procedure</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PARAMETER_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="ProcedureParameter.get_sql_definition"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter.get_sql_definition">[docs]</a>    <span class="k">def</span> <span class="nf">get_sql_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns SQL definition for parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">typedef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">datatype</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DOMAIN</span><span class="p">:</span>
            <span class="n">typedef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_DOMAIN</span><span class="p">:</span>
            <span class="n">typedef</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;TYPE OF </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_COLUMN</span><span class="p">:</span>
            <span class="n">typedef</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;TYPE OF COLUMN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">typedef</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_nullable</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39; NOT NULL&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collation</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; COLLATE </span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_input</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="ProcedureParameter.is_input"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter.is_input">[docs]</a>    <span class="k">def</span> <span class="nf">is_input</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if parameter is INPUT parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameter_type</span> <span class="ow">is</span> <span class="n">ParameterType</span><span class="o">.</span><span class="n">INPUT</span></div>
<div class="viewcode-block" id="ProcedureParameter.is_nullable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter.is_nullable">[docs]</a>    <span class="k">def</span> <span class="nf">is_nullable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if parameter allows NULL.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">))</span></div>
<div class="viewcode-block" id="ProcedureParameter.has_default"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter.has_default">[docs]</a>    <span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if parameter has default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">))</span></div>
<div class="viewcode-block" id="ProcedureParameter.is_packaged"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.ProcedureParameter.is_packaged">[docs]</a>    <span class="k">def</span> <span class="nf">is_packaged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if procedure parameter is defined in package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">procedure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Procedure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Procedure` instance to which this parameter belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_procedures</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_NAME&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sequence (position) of parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PARAMETER_NUMBER&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">domain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Domain</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Domain` for this parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parameter_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParameterType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parameter type (INPUT/OUTPUT).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ParameterType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PARAMETER_TYPE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Comlete SQL datatype definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DATATYPE</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">datatype</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DOMAIN</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_DOMAIN</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;TYPE OF </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="c1"># TypeFrom.TYPE_OF_COLUMN</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;TYPE OF COLUMN </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">.&quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_from</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeFrom</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Source for parameter data type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanism</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DATATYPE</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_VALUE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DATATYPE</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()</span> <span class="k">else</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DOMAIN</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_REFERENCE</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_DOMAIN</span>
            <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_COLUMN</span>
        <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown parameter mechanism code: </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;= &#39;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="k">elif</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DEFAULT &#39;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">8</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Collation` for this parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">cid</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">],</span> <span class="n">cid</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mechanism</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mechanism</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parameter mechanism code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Mechanism</span><span class="p">(</span><span class="n">code</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PARAMETER_MECHANISM&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">column</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableColumn</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.TableColumn` for this parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">rname</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">rname</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Package</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Package` this procedure belongs to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Procedure"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure">[docs]</a><span class="k">class</span> <span class="nc">Procedure</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents stored procedure.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User procedure: `create` (no_code=bool), `recreate`  no_code=bool),</span>
<span class="sd">          `create_or_alter` (no_code=bool), `drop`, `comment`</span>
<span class="sd">          `alter` (input=string_or_list, output=string_or_list, declare=string_or_list, code=string_or_list)</span>
<span class="sd">        - System procedure: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">PROCEDURE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__input_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__output_params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PROCEDURE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__colsql</span> <span class="o">=</span> <span class="s2">&quot;select RDB$PARAMETER_NAME, RDB$PROCEDURE_NAME, RDB$PARAMETER_NUMBER,&quot;</span> \
                        <span class="s2">&quot;RDB$PARAMETER_TYPE, RDB$FIELD_SOURCE, RDB$DESCRIPTION, RDB$SYSTEM_FLAG,&quot;</span> \
                        <span class="s2">&quot;RDB$DEFAULT_SOURCE, RDB$COLLATION_ID, RDB$NULL_FLAG, RDB$PARAMETER_MECHANISM,&quot;</span> \
                        <span class="s2">&quot;RDB$FIELD_NAME, RDB$RELATION_NAME, RDB$PACKAGE_NAME &quot;</span> \
                        <span class="s2">&quot;from rdb$procedure_parameters where rdb$procedure_name = ? &quot;</span> \
                        <span class="s2">&quot;and rdb$parameter_type = ? order by rdb$parameter_number&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;create_or_alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Procedure._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE procedure.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;no_code&#39;</span><span class="p">])</span>
        <span class="n">no_code</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;no_code&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;CREATE PROCEDURE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_input</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_INPUTS&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">input_params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39; (</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_params</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span> \
                              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">sequence</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_INPUTS&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_output</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_OUTPUTS&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;RETURNS (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;RETURNS (</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_params</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span> \
                              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">sequence</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_OUTPUTS&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">+</span><span class="s1">&#39;AS</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="p">((</span><span class="s1">&#39;BEGIN</span><span class="se">\n</span><span class="s1">END&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proc_type</span> <span class="o">!=</span> <span class="mi">1</span>
                               <span class="k">else</span> <span class="s1">&#39;BEGIN</span><span class="se">\n</span><span class="s1">  SUSPEND;</span><span class="se">\n</span><span class="s1">END&#39;</span><span class="p">)</span>
                              <span class="k">if</span> <span class="n">no_code</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">)</span></div>
<div class="viewcode-block" id="Procedure._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER procedure.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="s1">&#39;declare&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">])</span>
        <span class="n">inpars</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)</span>
        <span class="n">outpars</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">)</span>
        <span class="n">declare</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;declare&#39;</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;code&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Missing required parameter: &#39;code&#39;.&quot;</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">inpars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inpars</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">numpars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inpars</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">numpars</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="n">inpars</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39; (</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">inpars</span><span class="p">:</span>
                        <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">numpars</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="n">inpars</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">outpars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span><span class="p">:</span>
                <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outpars</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">numpars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outpars</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">numpars</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;RETURNS (</span><span class="si">{</span><span class="n">outpars</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39;RETURNS (</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">outpars</span><span class="p">:</span>
                        <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">numpars</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;RETURNS (</span><span class="si">{</span><span class="n">outpars</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">code</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">declare</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">declare</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">declare</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">declare</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">code</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">header</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">body</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">AS</span><span class="se">\n</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">BEGIN</span><span class="se">\n</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">END&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">header</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">body</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">AS</span><span class="se">\n</span><span class="s2">BEGIN</span><span class="se">\n</span><span class="s2">END&quot;</span>
        <span class="c1">#</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER PROCEDURE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}{</span><span class="n">header</span><span class="si">}{</span><span class="n">body</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Procedure._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP procedure.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP PROCEDURE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Procedure._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT procedure.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON PROCEDURE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Procedure.get_param"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure.get_param">[docs]</a>    <span class="k">def</span> <span class="nf">get_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProcedureParameter</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns `.ProcedureParameter` with specified name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_params</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">p</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_params</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">p</span>
        <span class="k">return</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="Procedure.has_input"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure.has_input">[docs]</a>    <span class="k">def</span> <span class="nf">has_input</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if procedure has any input parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_INPUTS&#39;</span><span class="p">])</span></div>
<div class="viewcode-block" id="Procedure.has_output"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure.has_output">[docs]</a>    <span class="k">def</span> <span class="nf">has_output</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if procedure has any output parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_OUTPUTS&#39;</span><span class="p">])</span></div>
<div class="viewcode-block" id="Procedure.is_packaged"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Procedure.is_packaged">[docs]</a>    <span class="k">def</span> <span class="nf">is_packaged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if procedure is defined in package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal unique ID number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;PSQL source code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PROCEDURE_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class that define access limits to the procedure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User name of procedure&#39;s creator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">ProcedureParameter</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of input parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__input_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_input</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__input_params</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">ProcedureParameter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__colsql</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="mi">0</span><span class="p">))),</span>
                                                 <span class="n">ProcedureParameter</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__input_params</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__input_params</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__input_params</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">ProcedureParameter</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of output parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__output_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_output</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__output_params</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">ProcedureParameter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__colsql</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">))),</span>
                                                  <span class="n">ProcedureParameter</span><span class="p">,</span> <span class="s1">&#39;item.name&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__output_params</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__output_params</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__output_params</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of privileges granted to procedure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">subject_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span>
                                                         <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">subject_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="p">)),</span>
                                                     <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">proc_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProcedureType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Procedure type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ProcedureType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PROCEDURE_TYPE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">valid_blr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Procedure BLR invalidation flag. Coul be True/False or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$VALID_BLR&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">engine_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Engine name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Entrypoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Package</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Package this procedure belongs to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privacy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Privacy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Privacy flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Privacy</span><span class="p">(</span><span class="n">code</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PRIVATE_FLAG&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Role"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Role">[docs]</a><span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents user role.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - User role: `create`, `drop`, `comment`</span>
<span class="sd">        - System role: `comment`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">ROLE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ROLE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Role._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Role._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE role.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;CREATE ROLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Role._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Role._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP role.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP ROLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Role._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Role._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT role.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON ROLE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$ROLE_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User name of role owner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privileges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Privilege</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of privileges granted to role.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">privileges</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">user_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span>
                                                         <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">user_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="p">)),</span>
                                                     <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionArgument"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument">[docs]</a><span class="k">class</span> <span class="nc">FunctionArgument</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represets UDF argument.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `none`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">Function</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">UDF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ARGUMENT_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="si">}</span><span class="s1">&#39;</span>
<div class="viewcode-block" id="FunctionArgument.get_sql_definition"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.get_sql_definition">[docs]</a>    <span class="k">def</span> <span class="nf">get_sql_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns SQL definition for parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">is_external</span><span class="p">():</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">datatype</span><span class="si">}</span><span class="s2">&quot;</span> \
                   <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39; BY DESCRIPTOR&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_by_descriptor</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span> \
                   <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39; BY VALUE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_by_value</span><span class="p">()</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_returning</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_returning</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span> \
                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">datatype</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_nullable</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39; NOT NULL&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collation</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; COLLATE </span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_returning</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="FunctionArgument.is_by_value"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_by_value">[docs]</a>    <span class="k">def</span> <span class="nf">is_by_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if argument is passed by value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanism</span> <span class="o">==</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_VALUE</span></div>
<div class="viewcode-block" id="FunctionArgument.is_by_reference"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_by_reference">[docs]</a>    <span class="k">def</span> <span class="nf">is_by_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if argument is passed by reference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanism</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_REFERENCE</span><span class="p">,</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_REFERENCE_WITH_NULL</span><span class="p">)</span></div>
<div class="viewcode-block" id="FunctionArgument.is_by_descriptor"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_by_descriptor">[docs]</a>    <span class="k">def</span> <span class="nf">is_by_descriptor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">any_</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if argument is passed by descriptor.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            any_: If True, method returns True if `any_` kind of descriptor is used (including</span>
<span class="sd">                 BLOB and ARRAY descriptors).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanism</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_VMS_DESCRIPTOR</span><span class="p">,</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_ISC_DESCRIPTOR</span><span class="p">,</span>
                                  <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_SCALAR_ARRAY_DESCRIPTOR</span><span class="p">)</span> <span class="k">if</span> <span class="n">any_</span> \
               <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanism</span> <span class="o">==</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_VMS_DESCRIPTOR</span></div>
<div class="viewcode-block" id="FunctionArgument.is_with_null"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_with_null">[docs]</a>    <span class="k">def</span> <span class="nf">is_with_null</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if argument is passed by reference with NULL support.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mechanism</span> <span class="ow">is</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_REFERENCE_WITH_NULL</span></div>
<div class="viewcode-block" id="FunctionArgument.is_freeit"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_freeit">[docs]</a>    <span class="k">def</span> <span class="nf">is_freeit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if (return) argument is declared as FREE_IT.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$MECHANISM&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="FunctionArgument.is_returning"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_returning">[docs]</a>    <span class="k">def</span> <span class="nf">is_returning</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if argument represents return value for function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RETURN_ARGUMENT&#39;</span><span class="p">]</span></div>
<div class="viewcode-block" id="FunctionArgument.is_nullable"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_nullable">[docs]</a>    <span class="k">def</span> <span class="nf">is_nullable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if parameter allows NULL.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">))</span></div>
<div class="viewcode-block" id="FunctionArgument.has_default"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.has_default">[docs]</a>    <span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if parameter has default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">))</span></div>
<div class="viewcode-block" id="FunctionArgument.is_packaged"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.FunctionArgument.is_packaged">[docs]</a>    <span class="k">def</span> <span class="nf">is_packaged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if function argument is defined in package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Function</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Function` to which this argument belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__function</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Argument position.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$ARGUMENT_POSITION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mechanism</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mechanism</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;How argument is passed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$MECHANISM&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">Mechanism</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Number code of the data type defined for the argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_TYPE&#39;</span><span class="p">])</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="n">FieldType</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of the argument in bytes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Negative number representing the scale of NUMBER and DECIMAL argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SCALE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">precision</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Indicates the number of digits of precision available to the data type of the</span>
<span class="sd">        argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_PRECISION&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sub_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FieldSubType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BLOB subtype.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_SUB_TYPE&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">FieldSubType</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">character_length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Length of CHAR and VARCHAR column, in characters (not bytes).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_LENGTH&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">character_set</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CharacterSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.CharacterSet` for a character/text BLOB argument, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_charset_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Comlete SQL datatype definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># FB3 PSQL function, datatype defined via internal domain</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DATATYPE</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">datatype</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DOMAIN</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_from</span> <span class="ow">is</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_DOMAIN</span><span class="p">:</span>
                <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;TYPE OF </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="c1"># TypeFrom.TYPE_OF_COLUMN</span>
            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;TYPE OF COLUMN </span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">.&quot;</span> \
                   <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Classic external UDF</span>
            <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">precision_known</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldType</span><span class="o">.</span><span class="n">SHORT</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">LONG</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">INT64</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldSubType</span><span class="o">.</span><span class="n">NUMERIC</span><span class="p">,</span> <span class="n">FieldSubType</span><span class="o">.</span><span class="n">DECIMAL</span><span class="p">):</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">INTEGRAL_SUBTYPES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span><span class="p">]</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">precision</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
                        <span class="n">precision_known</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">precision_known</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">SHORT</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NUMERIC(4, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">LONG</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NUMERIC(9, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NUMERIC(15, </span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">COLUMN_TYPES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldType</span><span class="o">.</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">VARYING</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">CSTRING</span><span class="p">):</span>
                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">character_length</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="kc">None</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">character_length</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="o">==</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">BLOB</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">field_subtypes</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; SUB_TYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_field_subtypes_</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; SUB_TYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">FieldType</span><span class="o">.</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">VARYING</span><span class="p">,</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">CSTRING</span><span class="p">,</span>
                                   <span class="n">FieldType</span><span class="o">.</span><span class="n">BLOB</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                  <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">default_character_set</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; CHARACTER SET </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">character_set</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_from</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeFrom</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Source for parameter data type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument_mechanism</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DATATYPE</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_VALUE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DATATYPE</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">()</span> <span class="k">else</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">DOMAIN</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">Mechanism</span><span class="o">.</span><span class="n">BY_REFERENCE</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_DOMAIN</span>
            <span class="k">return</span> <span class="n">TypeFrom</span><span class="o">.</span><span class="n">TYPE_OF_COLUMN</span>
        <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown parameter mechanism code: </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">argument_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Argument name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ARGUMENT_NAME&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">domain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Domain</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Domain` for this parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_domains</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;= &#39;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="k">elif</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DEFAULT &#39;</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">8</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Collation` for this parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">cid</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_collation_by_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">],</span> <span class="n">cid</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">argument_mechanism</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mechanism</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Argument mechanism.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ARGUMENT_MECHANISM&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">Mechanism</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">column</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableColumn</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.TableColumn` for this parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">rname</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">all_tables</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">rname</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Package</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;`.Package` this function belongs to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Function"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function">[docs]</a><span class="k">class</span> <span class="nc">Function</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents user defined function.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - External UDF: `declare`, `drop`, `comment`</span>
<span class="sd">        - PSQL UDF (not declared in package): `create` (no_code=bool),</span>
<span class="sd">          `recreate` (no_code=bool), `create_or_alter` (no_code=bool), `drop`,</span>
<span class="sd">          `alter` (arguments=string_or_list, returns=string, declare=string_or_list, code=string_or_list)</span>
<span class="sd">        - System UDF: `none`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">UDF</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__arguments</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__returns</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$MODULE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_external</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;comment&#39;</span><span class="p">,</span> <span class="s1">&#39;declare&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;create_or_alter&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;drop&#39;</span><span class="p">])</span>

<div class="viewcode-block" id="Function._get_declare_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function._get_declare_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_declare_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DECLARE function.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">fdef</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;DECLARE EXTERNAL FUNCTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">:</span>
            <span class="n">fdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_return</span><span class="p">():</span>
            <span class="n">fdef</span> <span class="o">+=</span> <span class="s1">&#39;RETURNS &#39;</span>
            <span class="n">fdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;PARAMETER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RETURN_ARGUMENT&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_return_argument</span><span class="p">()</span> \
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">returns</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span>
            <span class="n">fdef</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39; FREE_IT&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">returns</span><span class="o">.</span><span class="n">is_freeit</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fdef</span><span class="si">}</span><span class="s2">ENTRY_POINT &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="si">}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">MODULE_NAME &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>
<div class="viewcode-block" id="Function._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP function.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;DROP</span><span class="si">{</span><span class="s1">&#39; EXTERNAL&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_external</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2"> FUNCTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span></div>
<div class="viewcode-block" id="Function._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT function.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;COMMENT ON</span><span class="si">{</span><span class="s1">&#39; EXTERNAL&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_external</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2"> &quot;</span> \
               <span class="sa">f</span><span class="s2">&quot;FUNCTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s2">&quot;</span></div>
<div class="viewcode-block" id="Function._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE function.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;no_code&#39;</span><span class="p">])</span>
        <span class="n">no_code</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;no_code&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;CREATE FUNCTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_arguments</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39; (</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span> \
                              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;RETURNS </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">returns</span><span class="o">.</span><span class="n">get_sql_definition</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">+</span><span class="s1">&#39;AS</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="p">(</span><span class="s1">&#39;BEGIN</span><span class="se">\n</span><span class="s1">END&#39;</span> <span class="k">if</span> <span class="n">no_code</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">)</span></div>
<div class="viewcode-block" id="Function._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER object.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">,</span> <span class="s1">&#39;returns&#39;</span><span class="p">,</span> <span class="s1">&#39;declare&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">])</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;arguments&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;returns&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">par</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing required parameter: &#39;</span><span class="si">{</span><span class="n">par</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;returns&#39;</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
        <span class="n">declare</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;declare&#39;</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">numpars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">numpars</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="n">arguments</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39; (</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
                        <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">p</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">numpars</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39;)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; (</span><span class="si">{</span><span class="n">arguments</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;RETURNS </span><span class="si">{</span><span class="n">returns</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">code</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">declare</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">declare</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">declare</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">declare</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">code</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">body</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;AS</span><span class="se">\n</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">BEGIN</span><span class="se">\n</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">END&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;AS</span><span class="se">\n</span><span class="s1">BEGIN</span><span class="se">\n</span><span class="s1">END&#39;</span>
        <span class="c1">#</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER FUNCTION </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}{</span><span class="n">header</span><span class="si">}{</span><span class="n">body</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_load_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ARGUMENT_POSITION&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$MECHANISM&#39;</span><span class="p">,</span>
                <span class="s1">&#39;RDB$FIELD_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_SCALE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_LENGTH&#39;</span><span class="p">,</span>
                <span class="s1">&#39;RDB$FIELD_SUB_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$CHARACTER_SET_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_PRECISION&#39;</span><span class="p">,</span>
                <span class="s1">&#39;RDB$CHARACTER_LENGTH&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$ARGUMENT_NAME&#39;</span><span class="p">,</span>
                <span class="s1">&#39;RDB$FIELD_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DEFAULT_SOURCE&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$COLLATION_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$NULL_FLAG&#39;</span><span class="p">,</span>
                <span class="s1">&#39;RDB$ARGUMENT_MECHANISM&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">,</span>
                <span class="s1">&#39;RDB$SYSTEM_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;RDB$DESCRIPTION&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__arguments</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">FunctionArgument</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span>
                                     <span class="p">(</span><span class="n">mock</span> <span class="ow">or</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;select </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span><span class="si">}</span><span class="s2"> from rdb$function_arguments</span>
<span class="s2">where rdb$function_name = ? order by rdb$argument_position&quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,)))),</span>
                                    <span class="n">FunctionArgument</span><span class="p">,</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">rarg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RETURN_ARGUMENT&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">rarg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__arguments</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="n">rarg</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__returns</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Function.is_external"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function.is_external">[docs]</a>    <span class="k">def</span> <span class="nf">is_external</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if function is external UDF, False for PSQL functions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_name</span><span class="p">)</span></div>
<div class="viewcode-block" id="Function.has_arguments"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function.has_arguments">[docs]</a>    <span class="k">def</span> <span class="nf">has_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if function has input arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span></div>
<div class="viewcode-block" id="Function.has_return"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function.has_return">[docs]</a>    <span class="k">def</span> <span class="nf">has_return</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if function returns a value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">returns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>
<div class="viewcode-block" id="Function.has_return_argument"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function.has_return_argument">[docs]</a>    <span class="k">def</span> <span class="nf">has_return_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if function returns a value in input argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">returns</span><span class="o">.</span><span class="n">position</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">returns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Function.is_packaged"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Function.is_packaged">[docs]</a>    <span class="k">def</span> <span class="nf">is_packaged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if function is defined in package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Module name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$MODULE_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Entrypoint in module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">returns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FunctionArgument</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returning `.FunctionArgument` or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__arguments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_arguments</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__returns</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__returns</span><span class="p">()</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">FunctionArgument</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of function arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__arguments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_arguments</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__arguments</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">position</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">engine_mame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Engine name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$ENGINE_NAME&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Package</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Package this function belongs to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">private_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Privacy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Private flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$PRIVATE_FLAG&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span> \
               <span class="k">else</span> <span class="n">Privacy</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function source.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_SOURCE&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_ID&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">valid_blr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;BLR validity flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$VALID_BLR&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span> \
               <span class="k">else</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Owner name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">legacy_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Legacy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Legacy flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Legacy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$LEGACY_FLAG&#39;</span><span class="p">))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">deterministic_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deterministic flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$DETERMINISTIC_FLAG&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="DatabaseFile"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseFile">[docs]</a><span class="k">class</span> <span class="nc">DatabaseFile</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents database extension file.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `create`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FILE_NAME&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;FILE_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sequence</span><span class="si">}</span><span class="s1">&#39;</span>
<div class="viewcode-block" id="DatabaseFile.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.DatabaseFile.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Always returns True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;File name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FILE_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;File sequence number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FILE_SEQUENCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;File start page number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FILE_START&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;File length in pages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FILE_LENGTH&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="Shadow"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow">[docs]</a><span class="k">class</span> <span class="nc">Shadow</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents database shadow.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `create`, `drop` (preserve=bool)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__files</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Shadow._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE shadow.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CREATE SHADOW </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> &quot;</span> \
                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;MANUAL&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_manual</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;AUTO&#39;</span><span class="si">}</span><span class="s2">&quot;</span> \
                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39; CONDITIONAL&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">is_conditional</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">length</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; LENGTH </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; &#39;</span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">start</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; STARTING AT </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
                <span class="n">length</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; LENGTH </span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  FILE &#39;</span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">start</span><span class="si">}{</span><span class="n">length</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">sequence</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span></div>
<div class="viewcode-block" id="Shadow._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP shadow.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;preserve&#39;</span><span class="p">])</span>
        <span class="n">preserve</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;preserve&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;DROP SHADOW </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}{</span><span class="s1">&#39; PRESERVE FILE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">preserve</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;SHADOW_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span>
<div class="viewcode-block" id="Shadow.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Always returns False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="Shadow.is_manual"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow.is_manual">[docs]</a>    <span class="k">def</span> <span class="nf">is_manual</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s MANUAL shadow.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ShadowFlag</span><span class="o">.</span><span class="n">MANUAL</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span></div>
<div class="viewcode-block" id="Shadow.is_inactive"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow.is_inactive">[docs]</a>    <span class="k">def</span> <span class="nf">is_inactive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s INACTIVE shadow.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ShadowFlag</span><span class="o">.</span><span class="n">INACTIVE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span></div>
<div class="viewcode-block" id="Shadow.is_conditional"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Shadow.is_conditional">[docs]</a>    <span class="k">def</span> <span class="nf">is_conditional</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if it&#39;s CONDITIONAL shadow.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ShadowFlag</span><span class="o">.</span><span class="n">CONDITIONAL</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shadow ID number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SHADOW_NUMBER&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">flags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShadowFlag</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shadow flags.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ShadowFlag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FILE_FLAGS&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">DatabaseFile</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of shadow files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__files</span> <span class="o">=</span> <span class="n">DataList</span><span class="p">((</span><span class="n">DatabaseFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span>
                            <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">_select</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;select RDB$FILE_NAME, RDB$FILE_SEQUENCE,</span>
<span class="s2">RDB$FILE_START, RDB$FILE_LENGTH from RDB$FILES</span>
<span class="s2">where RDB$SHADOW_NUMBER = ?</span>
<span class="s2">order by RDB$FILE_SEQUENCE&quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SHADOW_NUMBER&#39;</span><span class="p">],))),</span> <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__files</span></div>

<div class="viewcode-block" id="Privilege"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege">[docs]</a><span class="k">class</span> <span class="nc">Privilege</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents priviledge to database object.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `grant` (grantors), `revoke` (grantors, grant_option)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;grant&#39;</span><span class="p">,</span> <span class="s1">&#39;revoke&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$USER&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$GRANTOR&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PRIVILEGE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="Privilege._get_grant_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege._get_grant_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_grant_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to GRANT privilege.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;grantors&#39;</span><span class="p">])</span>
        <span class="n">grantors</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;grantors&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;SYSDBA&#39;</span><span class="p">])</span>
        <span class="n">privileges</span> <span class="o">=</span> <span class="p">[</span><span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">SELECT</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">INSERT</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">,</span>
                      <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">DELETE</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">REFERENCES</span><span class="p">]</span>
        <span class="n">admin_option</span> <span class="o">=</span> <span class="s1">&#39; WITH GRANT OPTION&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_grant</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">in</span> <span class="n">privileges</span><span class="p">:</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">privilege</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="si">}</span><span class="s1">)&#39;</span>
            <span class="n">privilege</span> <span class="o">+=</span> <span class="s1">&#39; ON &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">EXECUTE</span><span class="p">:</span> <span class="c1"># procedure</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;EXECUTE ON PROCEDURE &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">MEMBERSHIP</span><span class="p">:</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">admin_option</span> <span class="o">=</span> <span class="s1">&#39; WITH ADMIN OPTION&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_grant</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;PROCEDURE &#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">Trigger</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;TRIGGER &#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">View</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;VIEW &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">grantors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grantor_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grantors</span><span class="p">):</span>
            <span class="n">granted_by</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; GRANTED BY </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grantor_name</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">granted_by</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;GRANT </span><span class="si">{</span><span class="n">privilege</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject_name</span><span class="si">}</span><span class="s1">&#39;</span> \
               <span class="sa">f</span><span class="s1">&#39; TO </span><span class="si">{</span><span class="n">utype</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">user_name</span><span class="si">}{</span><span class="n">admin_option</span><span class="si">}{</span><span class="n">granted_by</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Privilege._get_revoke_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege._get_revoke_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_revoke_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to REVOKE privilege.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;grant_option&#39;</span><span class="p">,</span> <span class="s1">&#39;grantors&#39;</span><span class="p">])</span>
        <span class="n">grantors</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;grantors&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;SYSDBA&#39;</span><span class="p">])</span>
        <span class="n">option_only</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;grant_option&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">option_only</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_grant</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t revoke grant option that wasn&#39;t granted.&quot;</span><span class="p">)</span>
        <span class="n">privileges</span> <span class="o">=</span> <span class="p">[</span><span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">SELECT</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">INSERT</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">UPDATE</span><span class="p">,</span>
                      <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">DELETE</span><span class="p">,</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">REFERENCES</span><span class="p">]</span>
        <span class="n">admin_option</span> <span class="o">=</span> <span class="s1">&#39;GRANT OPTION FOR &#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_grant</span><span class="p">()</span> <span class="ow">and</span> <span class="n">option_only</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">in</span> <span class="n">privileges</span><span class="p">:</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">privilege</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;([</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="si">}</span><span class="s1">])&#39;</span>
            <span class="n">privilege</span> <span class="o">+=</span> <span class="s1">&#39; ON &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">EXECUTE</span><span class="p">:</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;EXECUTE ON PROCEDURE &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">MEMBERSHIP</span><span class="p">:</span>
            <span class="n">privilege</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">admin_option</span> <span class="o">=</span> <span class="s1">&#39;ADMIN OPTION FOR&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_grant</span><span class="p">()</span> <span class="ow">and</span> <span class="n">option_only</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;PROCEDURE &#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">Trigger</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;TRIGGER &#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">View</span><span class="p">):</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;VIEW &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">utype</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">grantors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grantor_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grantors</span><span class="p">):</span>
            <span class="n">granted_by</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; GRANTED BY </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">grantor_name</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">granted_by</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;REVOKE </span><span class="si">{</span><span class="n">admin_option</span><span class="si">}{</span><span class="n">privilege</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject_name</span><span class="si">}</span><span class="s1">&#39;</span> \
               <span class="sa">f</span><span class="s1">&#39; FROM </span><span class="si">{</span><span class="n">utype</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">user_name</span><span class="si">}{</span><span class="n">granted_by</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Privilege.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Always returns True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>
<div class="viewcode-block" id="Privilege.has_grant"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.has_grant">[docs]</a>    <span class="k">def</span> <span class="nf">has_grant</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if privilege comes with GRANT OPTION.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">grant_option</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">grant_option</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">GrantOption</span><span class="o">.</span><span class="n">NONE</span></div>
<div class="viewcode-block" id="Privilege.is_select"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_select">[docs]</a>    <span class="k">def</span> <span class="nf">is_select</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is SELECT privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">SELECT</span></div>
<div class="viewcode-block" id="Privilege.is_insert"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_insert">[docs]</a>    <span class="k">def</span> <span class="nf">is_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is INSERT privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">INSERT</span></div>
<div class="viewcode-block" id="Privilege.is_update"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_update">[docs]</a>    <span class="k">def</span> <span class="nf">is_update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is UPDATE privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">UPDATE</span></div>
<div class="viewcode-block" id="Privilege.is_delete"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_delete">[docs]</a>    <span class="k">def</span> <span class="nf">is_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is DELETE privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">DELETE</span></div>
<div class="viewcode-block" id="Privilege.is_execute"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_execute">[docs]</a>    <span class="k">def</span> <span class="nf">is_execute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is EXECUTE privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">EXECUTE</span></div>
<div class="viewcode-block" id="Privilege.is_reference"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_reference">[docs]</a>    <span class="k">def</span> <span class="nf">is_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is REFERENCE privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span>  <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">REFERENCES</span></div>
<div class="viewcode-block" id="Privilege.is_membership"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Privilege.is_membership">[docs]</a>    <span class="k">def</span> <span class="nf">is_membership</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if this is ROLE membership privilege.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">privilege</span> <span class="ow">is</span> <span class="n">PrivilegeCode</span><span class="o">.</span><span class="n">MEMBERSHIP</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">UserInfo</span><span class="p">,</span> <span class="n">Role</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">,</span> <span class="n">Trigger</span><span class="p">,</span> <span class="n">View</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Grantee. Either `~firebird.driver.UserInfo`, `.Role`, `.Procedure`, `.Trigger`</span>
<span class="sd">        or `.View` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$USER&#39;</span><span class="p">],</span>
                                     <span class="n">ObjectType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$USER_TYPE&#39;</span><span class="p">]))</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grantor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UserInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Grantor `~firebird.driver.User` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UserInfo</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$GRANTOR&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">privilege</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivilegeCode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Privilege code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PrivilegeCode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PRIVILEGE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subject_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subject name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$RELATION_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subject_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subject type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ObjectType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$OBJECT_TYPE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FIELD_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subject</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Role</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">View</span><span class="p">,</span> <span class="n">Procedure</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Priviledge subject. Either `.Role`, `.Table`, `.View` or `.Procedure` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subject_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_type</span> <span class="o">==</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">TABLE</span><span class="p">:</span>
            <span class="c1"># Views are logged as tables, so try again for view code</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subject_name</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">VIEW</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$USER&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ObjectType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$USER_TYPE&#39;</span><span class="p">])</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grantor_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Grantor name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$GRANTOR&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grant_option</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GrantOption</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Grant option.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$GRANT_OPTION&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="kc">None</span> \
               <span class="k">else</span> <span class="n">GrantOption</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Package"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Package">[docs]</a><span class="k">class</span> <span class="nc">Package</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents PSQL package.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `create` (body=bool), `recreate` (body=bool), `create_or_alter` (body=bool),</span>
<span class="sd">        `alter` (header=string_or_list), `drop` (body=bool)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">PACKAGE_HEADER</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">PACKAGE_BODY</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;recreate&#39;</span><span class="p">,</span> <span class="s1">&#39;create_or_alter&#39;</span><span class="p">,</span> <span class="s1">&#39;alter&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;comment&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="Package._get_create_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Package._get_create_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_create_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to CREATE package.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">])</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
        <span class="n">cbody</span> <span class="o">=</span> <span class="s1">&#39;BODY &#39;</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;CREATE PACKAGE </span><span class="si">{</span><span class="n">cbody</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">AS</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">)</span></div>
<div class="viewcode-block" id="Package._get_alter_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Package._get_alter_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_alter_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to ALTER package.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">])</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">hdr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hdr</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">header</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;ALTER PACKAGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">AS</span><span class="se">\n</span><span class="s1">BEGIN</span><span class="se">\n</span><span class="si">{</span><span class="n">hdr</span><span class="si">}</span><span class="se">\n</span><span class="s1">END&#39;</span></div>
<div class="viewcode-block" id="Package._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Package._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP package.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">])</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
        <span class="n">cbody</span> <span class="o">=</span> <span class="s1">&#39;BODY &#39;</span> <span class="k">if</span> <span class="n">body</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP PACKAGE </span><span class="si">{</span><span class="n">cbody</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Package._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Package._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT package.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON PACKAGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="Package.has_valid_body"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Package.has_valid_body">[docs]</a>    <span class="k">def</span> <span class="nf">has_valid_body</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if package has valid body.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$VALID_BODY_FLAG&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="kc">None</span> \
               <span class="k">else</span> <span class="nb">bool</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Package header source.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PACKAGE_HEADER_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">body</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Package body source.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PACKAGE_BODY_SOURCE&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">security_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Security class name or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SECURITY_CLASS&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User name of package creator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$OWNER_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">functions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Function</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of package functions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fn</span><span class="p">:</span> <span class="n">fn</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                             <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">procedures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataList</span><span class="p">[</span><span class="n">Procedure</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List of package procedures.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">procedures</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="k">lambda</span> <span class="n">proc</span><span class="p">:</span> <span class="n">proc</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$PACKAGE_NAME&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                              <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="BackupHistory"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.BackupHistory">[docs]</a><span class="k">class</span> <span class="nc">BackupHistory</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents entry of history for backups performed using the nBackup utility.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        `None`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FILE_NAME&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;BCKP_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scn</span><span class="si">}</span><span class="s1">&#39;</span>
<div class="viewcode-block" id="BackupHistory.is_sys_object"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.BackupHistory.is_sys_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_sys_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Always returns True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The identifier assigned by the engine.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BACKUP_ID&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Full path and file name of backup file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FILE_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">created</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Backup date and time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$TIMESTAMP&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">level</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Backup level.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$BACKUP_LEVEL&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;System (scan) number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$SCN&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">guid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unique identifier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$GUID&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="Filter"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Filter">[docs]</a><span class="k">class</span> <span class="nc">Filter</span><span class="p">(</span><span class="n">SchemaItem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents userdefined BLOB filter.</span>

<span class="sd">    Supported SQL actions:</span>
<span class="sd">        - BLOB filter: `declare`, `drop`, `comment`</span>
<span class="sd">        - System UDF: `none`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">attributes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_code</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">BLOB_FILTER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$MODULE_NAME&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_attribute</span><span class="p">(</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sys_object</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;comment&#39;</span><span class="p">,</span> <span class="s1">&#39;declare&#39;</span><span class="p">,</span> <span class="s1">&#39;drop&#39;</span><span class="p">])</span>
<div class="viewcode-block" id="Filter._get_declare_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Filter._get_declare_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_declare_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DECLARE filter.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">fdef</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;DECLARE FILTER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span> \
               <span class="sa">f</span><span class="s1">&#39;INPUT_TYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">input_sub_type</span><span class="si">}</span><span class="s1"> OUTPUT_TYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_sub_type</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fdef</span><span class="si">}</span><span class="s2">ENTRY_POINT &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entrypoint</span><span class="si">}</span><span class="s2">&#39; MODULE_NAME &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>
<div class="viewcode-block" id="Filter._get_drop_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Filter._get_drop_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_drop_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to DROP filter.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_params</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DROP FILTER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span></div>
<div class="viewcode-block" id="Filter._get_comment_sql"><a class="viewcode-back" href="../../../ref-schema.html#firebird.lib.schema.Filter._get_comment_sql">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s2">&quot;Returns SQL command to COMMENT filter.&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">escape_single_quotes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;COMMENT ON FILTER </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_quoted_name</span><span class="p">()</span><span class="si">}</span><span class="s1"> IS </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s1">&#39;</span></div>
    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$FUNCTION_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the dynamic library or shared object where the code of the BLOB</span>
<span class="sd">        filter is located.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$MODULE_NAME&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">entrypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The exported name of the BLOB filter in the filter library.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="s1">&#39;RDB$ENTRYPOINT&#39;</span><span class="p">]</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_sub_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The BLOB subtype of the data to be converted by the function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$INPUT_SUB_TYPE&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_sub_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The BLOB subtype of the converted data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RDB$OUTPUT_SUB_TYPE&#39;</span><span class="p">)</span></div>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020-2023, The Firebird Project.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.0.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>